var d=null,f=!1,g=function(a,c,b){return a.call.apply(a.bind,arguments)},h=function(a,c,b){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,e);return a.apply(c,b)}}return function(){return a.apply(c,arguments)}},i=function(a,c,b){i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:h;return i.apply(d,arguments)};
Function.prototype.bind=Function.prototype.bind||function(a,c){if(1<arguments.length){var b=Array.prototype.slice.call(arguments,1);b.unshift(this,a);return i.apply(d,b)}return i(this,a)};var l={},m=function(a,c,b){chrome.extension.sendMessage({type:a,data:c},function(a){a&&b(a.data)})};chrome.extension.onMessage.addListener(function(a,c,b){var e=a.type,j=a.data;if(l[e]){var k=function(a,c){b({type:a,data:c})};l[e].forEach(function(a){a(j,c,k)})}});chrome.i18n.getMessage("untitled");chrome.i18n.getMessage("@@bidi_dir");chrome.i18n.getMessage("locale");var n="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),p=function(a,c){for(var b,e,j=1;j<arguments.length;j++){e=arguments[j];for(b in e)a[b]=e[b];for(var k=0;k<n.length;k++)b=n[k],Object.prototype.hasOwnProperty.call(e,b)&&(a[b]=e[b])}};var q=function(a,c,b,e){this.a=new XMLHttpRequest;this.g=a;this.h=c;this.b=b;this.a.onreadystatechange=i(this.j,this);this.a.onabort=i(this.i,this);this.b.onprogress&&this.a.upload.addEventListener("progress",this.b.onprogress,f);e&&p(this.a,e)};q.prototype.j=function(){if(this.a.readyState==this.a.DONE)if(200<=this.a.status&&300>this.a.status&&this.a.response)this.b.onload(this.a);else this.a.abort()};q.prototype.i=function(){this.b.onerror(this.a)};
q.prototype.send=function(a){a=a||d;this.a.open(this.g,this.h,!0);this.a.send(a)};var r=function(a,c){q.call(this,"POST","https://www.mychrometheme.com/delete",c);this.d=a},s=r,t=function(){};t.prototype=q.prototype;s.k=q.prototype;s.prototype=new t;r.prototype.send=function(){var a=JSON.stringify({guid:this.d.guid,secret:this.d.secret});r.k.send.call(this,a)};var u=document.querySelector("meta[name='guid']"),v=u?u.getAttribute("content"):d,w=d,x=d,y=document.querySelector("#get-app");if(y){var z=y.querySelector(".subtitle");z&&(z.style.display="none");y.dataset.action="launch";y.addEventListener("click",function(){window.open(chrome.extension.getURL("views/main.html")+"#startgentheme",d,d,f)})}document.getElementById("oops")||(w=document.getElementById("delete"),m("candelete",{status:"",data:{guid:v}},A));
function B(){document.querySelector("#confirm-container").classList.add("hidden");document.querySelector("#overlay").classList.add("hidden");document.querySelector("#confirm-container .ok").removeEventListener("click",C,f);document.querySelector("#confirm-container .cancel").removeEventListener("click",B,f);document.querySelector("#confirm-container .close").removeEventListener("click",B,f)}function D(a){27==a.keyCode&&(document.removeEventListener("keyup",D,f),B())}
function E(){document.querySelector("#confirm-container").classList.remove("hidden");document.querySelector("#overlay").classList.remove("hidden");document.querySelector("#confirm-container .ok").addEventListener("click",C,f);document.querySelector("#confirm-container .cancel").addEventListener("click",B,f);document.querySelector("#confirm-container .close").addEventListener("click",B,f);document.addEventListener("keyup",D,f)}
function F(){w.querySelector(".text").textContent=chrome.i18n.getMessage("deleted");w.classList.add("deleted");w.removeEventListener("click",C,f);m("delete",{status:"deleted",data:{themeId:x.id}},function(){})}function G(){}
function C(){w.removeEventListener("click",E,f);document.querySelector("#confirm-container").classList.add("hidden");document.querySelector("#overlay").classList.add("hidden");var a={onload:F,onerror:G};w.querySelector(".text").textContent=chrome.i18n.getMessage("deleting");document.querySelector("#install-theme").classList.add("disabled");document.querySelector("#page-url").setAttribute("disabled",!0);document.querySelector("#share-theme").classList.add("hidden");(new r(x,a)).send(d)}
function A(a){a&&a.canDelete&&(document.getElementById("report").classList.add("hidden"),w.classList.remove("hidden"),x=a.themeInfo,w.addEventListener("click",E,f));var c=document.getElementById("install-theme");c&&(c.dataset.creator=a.canDelete)};
