var h=void 0,i=!0,j=null,l=!1,m,n=this,aa=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&
!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},p=function(a){return"string"==typeof a},ba=function(a){return"function"==aa(a)},s=function(a){return a[ca]||(a[ca]=++da)},ca="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),da=0,ea=function(a,b,c){return a.call.apply(a.bind,arguments)},fa=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);
return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},t=function(a,b,c){t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa;return t.apply(j,arguments)},ga=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}},u=function(a,b){function c(){}
c.prototype=b.prototype;a.u=b.prototype;a.prototype=new c};Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return t.apply(j,c)}return t(this,a)};var v={},ha=function(a,b){v[a]||(v[a]=[]);v[a].push(b)},x=function(a,b){chrome.extension.sendMessage({type:a,data:b},function(){})};chrome.extension.onMessage.addListener(function(a,b,c){var d=a.type,f=a.data;if(v[d]){var e=function(a,b){c({type:a,data:b})};v[d].forEach(function(a){a(f,b,e)})}});var y=function(a){Error.captureStackTrace?Error.captureStackTrace(this,y):this.stack=Error().stack||"";a&&(this.message=String(a))};u(y,Error);y.prototype.name="CustomError";var ia=function(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a};var ja=function(a,b){b.unshift(a);y.call(this,ia.apply(j,b));b.shift()};u(ja,y);ja.prototype.name="AssertionError";var z=function(a,b,c){if(!a){var d=Array.prototype.slice.call(arguments,2),f="Assertion failed";if(b)var f=f+(": "+b),e=d;throw new ja(""+f,e||[]);}};var A=Array.prototype,ka=A.indexOf?function(a,b,c){z(a.length!=j);return A.indexOf.call(a,b,c)}:function(a,b,c){c=c==j?0:0>c?Math.max(0,a.length+c):c;if(p(a))return!p(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},la=A.some?function(a,b,c){z(a.length!=j);return A.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,e=0;e<d;e++)if(e in f&&b.call(c,f[e],e,a))return i;return l};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
var B=function(a,b){this.K=[];this.va=b||j};m=B.prototype;m.I=l;m.F=l;m.Y=l;m.ca=l;m.ka=l;m.wa=0;m.da=function(a,b){this.Y=l;ma(this,a,b)};var ma=function(a,b,c){a.I=i;a.X=c;a.F=!b;na(a)},pa=function(a){if(a.I){if(!a.ka)throw new oa;a.ka=l}};B.prototype.g=function(a){pa(this);qa(a);ma(this,i,a)};
var C=function(a,b){pa(a);qa(b);ma(a,l,b)},qa=function(a){z(!(a instanceof B),"An execution sequence may not be initiated with a blocking Deferred.")},D=function(a,b,c,d){z(!a.ca,"Blocking Deferreds can not be re-used");a.K.push([b,c,d]);a.I&&na(a)},ra=function(a){return la(a.K,function(a){return ba(a[1])})},na=function(a){a.$&&(a.I&&ra(a))&&(n.clearTimeout(a.$),delete a.$);a.ea&&(a.ea.wa--,delete a.ea);for(var b=a.X,c=l,d=l;a.K.length&&!a.Y;){var f=a.K.shift(),e=f[0],g=f[1],f=f[2];if(e=a.F?g:e)try{var k=
e.call(f||a.va,b);k!==h&&(a.F=a.F&&(k==b||k instanceof Error),a.X=b=k);b instanceof B&&(d=i,a.Y=i)}catch(q){b=q,a.F=i,ra(a)||(c=i)}}a.X=b;d&&(D(b,t(a.da,a,i),t(a.da,a,l)),b.ca=i);c&&(a.$=n.setTimeout(function(){throw b;},0))},oa=function(){y.call(this)};u(oa,y);oa.prototype.message="Deferred has already fired";oa.prototype.name="AlreadyCalledError";var sa=function(){};sa.prototype.ja=l;sa.prototype.ga=function(){this.ja||(this.ja=i,this.z())};sa.prototype.z=function(){if(this.la)for(;this.la.length;)this.la.shift()()};var E=function(a,b){this.type=a;this.currentTarget=this.target=b};m=E.prototype;m.z=function(){};m.ga=function(){};m.N=l;m.defaultPrevented=l;m.O=i;m.preventDefault=function(){this.defaultPrevented=i;this.O=l};var ta="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),ua=function(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<ta.length;e++)c=ta[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var va="",wa=/WebKit\/(\S+)/.exec(n.navigator?n.navigator.userAgent:j),xa=va=wa?wa[1]:"",ya={},za=function(){if(!ya["528"]){for(var a=0,b=String(xa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),c="528".replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=Math.max(b.length,c.length),f=0;0==a&&f<d;f++){var e=b[f]||"",g=c[f]||"",k=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var r=k.exec(e)||["","",""],w=q.exec(g)||["","",""];if(0==r[0].length&&0==w[0].length)break;a=((0==r[1].length?0:
parseInt(r[1],10))<(0==w[1].length?0:parseInt(w[1],10))?-1:(0==r[1].length?0:parseInt(r[1],10))>(0==w[1].length?0:parseInt(w[1],10))?1:0)||((0==r[2].length)<(0==w[2].length)?-1:(0==r[2].length)>(0==w[2].length)?1:0)||(r[2]<w[2]?-1:r[2]>w[2]?1:0)}while(0==a)}ya["528"]=0<=a}};za();za();var Aa=function(a,b){a&&this.Z(a,b)};u(Aa,E);m=Aa.prototype;m.target=j;m.relatedTarget=j;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.aa=j;
m.Z=function(a,b){var c=this.type=a.type;E.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;d||("mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement));this.relatedTarget=d;this.offsetX=a.offsetX;this.offsetY=a.offsetY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:
0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.aa=a;a.defaultPrevented&&this.preventDefault();delete this.N};m.preventDefault=function(){Aa.u.preventDefault.call(this);var a=this.aa;a.preventDefault?a.preventDefault():a.returnValue=l};m.z=function(){};var Ba=0;var Ca=function(){};m=Ca.prototype;m.key=0;m.removed=l;m.J=l;m.Z=function(a,b,c,d,f,e){if(ba(a))this.ha=i;else if(a&&a.handleEvent&&ba(a.handleEvent))this.ha=l;else throw Error("Invalid listener argument");this.v=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.V=e;this.J=l;this.key=++Ba;this.removed=l};m.handleEvent=function(a){return this.ha?this.v.call(this.V||this.src,a):this.v.handleEvent.call(this.v,a)};var F={},G={},H={},I={},Da=function(a,b,c,d,f){if("array"==aa(b))for(var e=0;e<b.length;e++)Da(a,b[e],c,d,f);else a:{if(!b)throw Error("Invalid event type");d=!!d;var g=G;b in g||(g[b]={t:0,p:0});g=g[b];d in g||(g[d]={t:0,p:0},g.t++);var g=g[d],e=s(a),k;g.p++;if(g[e]){k=g[e];for(var q=0;q<k.length;q++)if(g=k[q],g.v==c&&g.V==f){if(g.removed)break;k[q].J=l;break a}}else k=g[e]=[],g.t++;var r=Ea,w=function(a){return r.call(w.src,w.v,a)},q=w,g=new Ca;g.Z(c,q,a,b,d,f);g.J=l;q.src=a;q.v=g;k.push(g);H[e]||
(H[e]=[]);H[e].push(g);a.addEventListener?(a==n||!a.ba)&&a.addEventListener(b,q,d):a.attachEvent(b in I?I[b]:I[b]="on"+b,q);F[g.key]=g}},Fa=function(a,b,c,d,f){if("array"==aa(b))for(var e=0;e<b.length;e++)Fa(a,b[e],c,d,f);else{d=!!d;a:{e=G;if(b in e&&(e=e[b],d in e&&(e=e[d],a=s(a),e[a]))){a=e[a];break a}a=j}if(a)for(e=0;e<a.length;e++)if(a[e].v==c&&a[e].capture==d&&a[e].V==f){Ga(a[e].key);break}}},Ga=function(a){if(F[a]){var b=F[a];if(!b.removed){var c=b.src,d=b.type,f=b.proxy,e=b.capture;c.removeEventListener?
(c==n||!c.ba)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in I?I[d]:I[d]="on"+d,f);c=s(c);if(H[c]){var f=H[c],g=ka(f,b);0<=g&&(z(f.length!=j),A.splice.call(f,g,1));0==f.length&&delete H[c]}b.removed=i;if(b=G[d][e][c])b.ia=i,Ha(d,e,c,b);delete F[a]}}},Ha=function(a,b,c,d){if(!d.Q&&d.ia){for(var f=0,e=0;f<d.length;f++)d[f].removed?d[f].proxy.src=j:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.ia=l;0==e&&(delete G[a][b][c],G[a][b].t--,0==G[a][b].t&&(delete G[a][b],G[a].t--),0==G[a].t&&delete G[a])}},
Ja=function(a,b,c,d,f){var e=1;b=s(b);if(a[b]){var g=--a.p,k=a[b];k.Q?k.Q++:k.Q=1;try{for(var q=k.length,r=0;r<q;r++){var w=k[r];w&&!w.removed&&(e&=Ia(w,f)!==l)}}finally{a.p=Math.max(g,a.p),k.Q--,Ha(c,d,b,k)}}return Boolean(e)},Ia=function(a,b){a.J&&Ga(a.key);return a.handleEvent(b)},Ea=function(a,b){if(a.removed||!(a.type in G))return i;var c=new Aa(b,this);return Ia(a,c)};var Ka=function(){};u(Ka,sa);m=Ka.prototype;m.ba=i;m.W=j;m.addEventListener=function(a,b,c,d){Da(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){Fa(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=G;if(b in c){if(p(a))a=new E(a,this);else if(a instanceof E)a.target=a.target||this;else{var d=a;a=new E(b,this);ua(a,d)}var d=1,f,c=c[b],b=i in c,e;if(b){f=[];for(e=this;e;e=e.W)f.push(e);e=c[i];e.p=e.t;for(var g=f.length-1;!a.N&&0<=g&&e.p;g--)a.currentTarget=f[g],d&=Ja(e,f[g],a.type,i,a)&&a.O!=l}if(l in c)if(e=c[l],e.p=e.t,b)for(g=0;!a.N&&g<f.length&&e.p;g++)a.currentTarget=f[g],d&=Ja(e,f[g],a.type,l,a)&&a.O!=l;else for(f=this;!a.N&&f&&e.p;f=f.W)a.currentTarget=
f,d&=Ja(e,f,a.type,l,a)&&a.O!=l;a=Boolean(d)}else a=i;return a};m.z=function(){Ka.u.z.call(this);var a=0;if(this!=j){var b=s(this);if(H[b])for(var b=H[b],c=b.length-1;0<=c;c--)Ga(b[c].key),a++}else for(c in b=function(b,c){Ga(c);a++},F)b.call(h,0,c);this.W=j};var J=function(a,b){y.call(this,ia("Error %s: %s",b,La(a)));this.code=a};u(J,y);
var La=function(a){switch(a){case 1:return"File or directory not found";case 2:return"Insecure or disallowed operation";case 3:return"Operation aborted";case 4:return"File or directory not readable";case 5:return"Invalid encoding";case 6:return"Cannot modify file or directory";case 7:return"Invalid state";case 8:return"Invalid line-ending specifier";case 9:return"Invalid modification";case 10:return"Quota exceeded";case 11:return"Invalid filetype";case 12:return"File or directory already exists at specified path";
default:return"Unrecognized error"}};var Ma=function(a,b){E.call(this,a.type,b);this.aa=a};u(Ma,E);var K=function(){this.i=new FileReader;this.i.onloadstart=t(this.C,this);this.i.onprogress=t(this.C,this);this.i.onload=t(this.C,this);this.i.onabort=t(this.C,this);this.i.onerror=t(this.C,this);this.i.onloadend=t(this.C,this)};u(K,Ka);K.prototype.abort=function(){try{this.i.abort()}catch(a){throw new J(a.code,"aborting read");}};K.prototype.getError=function(){return this.i.error&&new J(this.i.error.code,"reading file")};K.prototype.C=function(a){this.dispatchEvent(new Ma(a,this))};
K.prototype.z=function(){K.u.z.call(this);delete this.i};var L=function(a,b){this.w=a;this.q=b};L.prototype.isFile=function(){return this.q.isFile};L.prototype.getName=function(){return this.q.name};L.prototype.remove=function(){var a=new B;this.q.remove(t(a.g,a,i),t(function(b){C(a,new J(b.code,"removing "+this.q.fullPath))},this));return a};var M=function(a,b){L.call(this,a,b);this.M=b};u(M,L);
M.prototype.getFile=function(a,b){var c=new B;this.M.getFile(a,Na(b),t(function(a){c.g(new Oa(this.w,a))},this),t(function(b){C(c,new J(b.code,"loading file "+a+" from "+this.q.fullPath))},this));return c};M.prototype.getDirectory=function(a,b){var c=new B;this.M.getDirectory(a,Na(b),t(function(a){c.g(new M(this.w,a))},this),t(function(b){C(c,new J(b.code,"loading directory "+a+" from "+this.q.fullPath))},this));return c};
M.prototype.removeRecursively=function(){var a=new B;this.M.removeRecursively(t(a.g,a,i),t(function(b){C(a,new J(b.code,"removing "+this.q.fullPath+" recursively"))},this));return a};var Na=function(a){return 2==a?{create:i}:3==a?{create:i,exclusive:i}:{}},Oa=function(a,b){L.call(this,a,b);this.Da=b};u(Oa,L);Oa.prototype.file=function(){var a=new B;this.Da.file(function(b){a.g(b)},t(function(b){C(a,new J(b.code,"getting file for "+this.q.fullPath))},this));return a};var Pa=function(a){this.w=a};Pa.prototype.getName=function(){return this.w.name};var Ra=function(){var a=Qa;return new M(a,a.w.root)};var Sa=function(a,b){var c=new B,d=Ra().getFile("/"+a+"/"+b);D(d,function(a){a=a.file();D(a,function(a){var b=new K,d=new B;b.addEventListener("loadend",ga(function(a,b){var c=b.i.result,d=b.getError();c!=j&&!d?a.g(c):C(a,d);b.ga()},d,b));b.i.readAsDataURL(a);D(d,function(a){c.g(a)},j,h)},j,h)},j,h);D(d,j,function(){C(c)},h);return c};var N=function(a){this.b=a;this.H=new B};N.prototype.Ea=function(){this.H.g(this.b)};N.prototype.fa=function(){C(this.H,this.b)};N.prototype.xa=function(a){a=a.removeRecursively();D(a,this.Ea,j,this);D(a,j,this.fa,this)};N.prototype.remove=function(){var a=Ra().getDirectory("/"+this.b+"/");D(a,this.xa,j,this);D(a,j,this.fa,this);return this.H};var Qa=j,Ta;var Ua=n.requestFileSystem||n.webkitRequestFileSystem;if(ba(Ua)){var Va=new B;Ua(1,5242880,function(a){Va.g(new Pa(a))},function(a){C(Va,new J(a.code,"requesting filesystem"))});Ta=Va}else{var Wa=new B;C(Wa,Error("File API unsupported"));Ta=Wa}D(Ta,function(a){Qa=a},j,h);var Xa=function(a){this.H=new B;this.b=a||"Theme-"+Date.now()},Ya=function(a){var b=new B,c=Ra().getDirectory("/"+a+"/");D(c,function(c){var f=new B,e=new B,g=c.M.createReader(),k=[],q=t(function(a){C(e,new J(a.code,"listing directory "+this.q.fullPath))},c),r=t(function(a){if(a.length){for(var b=0,c;c=a[b];b++)k.push(c.isFile?new Oa(this.w,c):new M(this.w,c));g.readEntries(r,q)}else e.g(k)},c);g.readEntries(r,q);D(e,function(a){var b={},c=a.length;if(3<=c){for(var d=0;d<c;d++){var e=a[d];if(e.isFile()){var g=
"";switch(e.getName()){case "theme.crx":g="crx";break;case "theme.zip":g="zip";break;case "preview.jpeg":g="preview"}g&&(b[g]=e.q.toURL(h))}}b.crx&&b.zip&&b.preview?f.g(b):C(f)}else C(f)},j,h);D(e,j,function(){C(f)},h);D(f,function(){b.g(new Xa(a))},j,h);D(f,j,function(){C(b)},h)},j,h);D(c,j,function(){C(b)},h);return b};Xa.prototype.k=function(){return this.b};Xa.prototype.S=function(a,b){var c=(new N(this.b)).remove();b=b||j;D(c,function(c){a.call(b,i,c)},j,h);D(c,j,function(c){a.call(b,l,c)},h)};var Za=function(a,b){var c,d=b.length;for(c=0;c<d;++c)a.push(b[c])};var $a=chrome.i18n.getMessage;var ab=function(){};var bb=function(){this.d=[];this.T=[];this.ya=[];this.G=[];this.G[0]=128;for(var a=1;64>a;++a)this.G[a]=0;this.reset()};u(bb,ab);bb.prototype.reset=function(){this.d[0]=1732584193;this.d[1]=4023233417;this.d[2]=2562383102;this.d[3]=271733878;this.d[4]=3285377520;this.U=this.D=0};
var cb=function(a,b,c){c||(c=0);var d=a.ya;if(p(b))for(var f=0;16>f;f++)d[f]=b.charCodeAt(c++)<<24|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<8|b.charCodeAt(c++);else for(f=0;16>f;f++)d[f]=b[c++]<<24|b[c++]<<16|b[c++]<<8|b[c++];for(f=16;80>f;f++){var e=d[f-3]^d[f-8]^d[f-14]^d[f-16];d[f]=(e<<1|e>>>31)&4294967295}b=a.d[0];c=a.d[1];for(var g=a.d[2],k=a.d[3],q=a.d[4],r,f=0;80>f;f++)40>f?20>f?(e=k^c&(g^k),r=1518500249):(e=c^g^k,r=1859775393):60>f?(e=c&g|k&(c|g),r=2400959708):(e=c^g^k,r=3395469782),e=(b<<
5|b>>>27)+e+q+r+d[f]&4294967295,q=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=e;a.d[0]=a.d[0]+b&4294967295;a.d[1]=a.d[1]+c&4294967295;a.d[2]=a.d[2]+g&4294967295;a.d[3]=a.d[3]+k&4294967295;a.d[4]=a.d[4]+q&4294967295};bb.prototype.update=function(a,b){b===h&&(b=a.length);for(var c=b-64,d=0,f=this.T,e=this.D;d<b;){if(0==e)for(;d<=c;)cb(this,a,d),d+=64;if(p(a))for(;d<b;){if(f[e++]=a.charCodeAt(d++),64==e){cb(this,f);e=0;break}}else for(;d<b;)if(f[e++]=a[d++],64==e){cb(this,f);e=0;break}}this.D=e;this.U+=b};chrome.i18n.getMessage("untitled");chrome.i18n.getMessage("@@bidi_dir");var db=chrome.i18n.getMessage("locale");var O=function(a,b,c,d){this.h=new XMLHttpRequest;this.za=a;this.Aa=b;this.P=c;this.h.onreadystatechange=t(this.Ca,this);this.h.onabort=t(this.Ba,this);this.P.onprogress&&this.h.upload.addEventListener("progress",this.P.onprogress,l);d&&ua(this.h,d)};O.prototype.Ca=function(){if(this.h.readyState==this.h.DONE)if(200<=this.h.status&&300>this.h.status&&this.h.response)this.P.onload(this.h);else this.h.abort()};O.prototype.Ba=function(){this.P.onerror(this.h)};
O.prototype.send=function(a){a=a||j;this.h.open(this.za,this.Aa,i);this.h.send(a)};var eb=function(a,b){O.call(this,"POST","https://www.mychrometheme.com/upload",b);this.j=a};u(eb,O);
eb.prototype.send=function(a){var b=a.crx.substring(a.crx.indexOf(",")+1),c,d=3*b.length/4-(b.match(/=/g)||[]).length;c=this.j.name;c=c.replace(/\r\n/g,"\n");for(var f=[],e=0,g=0;g<c.length;g++){var k=c.charCodeAt(g);128>k?f[e++]=k:(2048>k?f[e++]=k>>6|192:(f[e++]=k>>12|224,f[e++]=k>>6&63|128),f[e++]=k&63|128)}f=f||[];c=[];e=new ArrayBuffer(28);e=new Uint8Array(e);n.window.crypto.getRandomValues(e);c instanceof Array?Za(c,e):ua(c,e);var g=[],k=0,q=d,r=0>d;r&&(k=255,q=-1*d-1);do d=q&255,r&&(d^=255),
g.push(d),q>>>=8;while(q);for(;4>g.length;)g.push(k);g.slice(0,4);d=new bb;d.update(e);d.update(g);d.update(f);f=[];g=8*d.U;56>d.D?d.update(d.G,56-d.D):d.update(d.G,64-(d.D-56));for(e=63;56<=e;e--)d.T[e]=g&255,g/=256;cb(d,d.T);for(e=g=0;5>e;e++)for(k=24;0<=k;k-=8)f[g++]=d.d[e]>>k&255;c instanceof Array?Za(c,f):ua(c,f);c=String.fromCharCode.apply(j,c);c=n.btoa(c);a=c+b+"||"+a.preview+"||"+JSON.stringify(this.j);eb.u.send.call(this,a)};
var fb=function(a,b){O.call(this,"POST","https://www.mychrometheme.com/delete",b);this.j=a};u(fb,O);fb.prototype.send=function(){var a=JSON.stringify({guid:this.j.guid,secret:this.j.secret});fb.u.send.call(this,a)};var gb=function(a,b){O.call(this,"POST","https://www.mychrometheme.com/share",b);this.j=a};u(gb,O);gb.prototype.send=function(){var a=JSON.stringify({guid:this.j.guid,secret:this.j.secret});gb.u.send.call(this,a)};
var hb=function(a,b){O.call(this,"POST","https://www.mychrometheme.com/unshare",b);this.j=a};u(hb,O);hb.prototype.send=function(){var a=JSON.stringify({guid:this.j.guid,secret:this.j.secret});hb.u.send.call(this,a)};var P=function(a){this.b=a||"";this.A=this.a=j;this.B=l;ib(this)},ib=function(a){try{a.a=JSON.parse(localStorage.getItem(a.b)),a.B=!a.a}catch(b){a.B=i}};P.prototype.update=function(){ib(this)};var jb=function(){var a=Q,b=document.createElement("a");b.setAttribute("href",a.a.urls.zip);a=a.a.name?a.a.name:$a("untitled");b.setAttribute("download",a+".zip");b.click()};P.prototype.k=function(){return this.b};
var R=function(a){return a.a.urls.share},kb=function(a){return a.a.isShared},lb=function(a){return/^https?:\/\//.test(a.a.urls.crx)},mb=function(a){return!!a.a.urls.share};P.prototype.ua=function(){lb(this)?(nb(this),this.L(i,this.b,{error:""})):ob(this)};P.prototype.ta=function(){this.L(l,this.b,{error:"server"})};
var pb=function(a){if(a.a.urls.share){var b={id:a.b,guid:a.a.guid,secret:a.a.secret};a={onload:t(a.ua,a),onerror:t(a.ta,a)};(new fb(b,a)).send(j)}else ob(a)},nb=function(a){localStorage.removeItem(a.b);var b=JSON.parse(localStorage.getItem("themes"));a=b.indexOf(a.b);-1!=a&&(b.splice(a,1),localStorage.setItem("themes",JSON.stringify(b)))},ob=function(a){a.A.S(function(a,c){nb(this);this.L(a,c,{error:a?"":"local"})},a)};
P.prototype.S=function(a){this.L=a;!lb(this)&&!this.A?(a=Ya(this.b),D(a,function(a){this.A=a;pb(this)},j,this),D(a,j,function(){this.L(l,this.b,{error:"fetching"})},this)):pb(this)};var qb=function(a){localStorage.setItem(a.b,JSON.stringify(a.a))};P.prototype.pa=function(a){a=JSON.parse(a.responseText);a.ok?(this.a.secret=a.content.secret,this.a.urls.share=a.content.url,this.a.guid=a.content.guid,this.a.isShared=i,qb(this),this.o.success(i,this.b,this.a.urls.share)):this.o.success(l,this.b)};
P.prototype.oa=function(){this.o.success(l,this.b)};P.prototype.na=function(){this.a.isShared=i;qb(this);this.o.success(i,this.b,R(this))};P.prototype.ma=function(){this.o.success(l,this.b)};
var rb=function(a){if(mb(a)){var b={id:a.b,guid:a.a.guid,secret:a.a.secret};a={onload:t(a.na,a),onerror:t(a.ma,a)};(new gb(b,a)).send()}else{var b=a.A,c=new B,d={},f=Sa(b.b,"theme.crx");D(f,function(a){d.crx=a;d.preview&&c.g(d)},j,h);b=Sa(b.b,"preview.jpeg");D(b,function(a){d.preview=a;d.crx&&c.g(d)},j,h);D(c,function(a){var b={name:this.a.name,description:this.a.desc},c={onload:t(this.pa,this),onerror:t(this.oa,this)};this.o.onprogress&&(c.onprogress=this.o.onprogress);(new eb(b,c)).send(a)},j,a)}};
P.prototype.ra=function(){this.a.isShared=l;qb(this);this.o.success(i,this.b)};P.prototype.qa=function(){this.o.success(l,this.b)};var sb=function(a,b){var c=Q;if(b&&kb(c)&&mb(c)){c.o=a;var d={id:c.b,guid:c.a.guid,secret:c.a.secret},c={onload:t(c.ra,c),onerror:t(c.qa,c)};(new hb(d,c)).send()}else c.o=a,!mb(c)&&!c.A?(d=Ya(c.b),D(d,function(a){this.A=a;rb(this)},j,c)):rb(c)};var S=function(a,b,c){a=a instanceof HTMLElement?[a]:Array.prototype.slice.call(a);var d=b.split(",");a.forEach(function(a){d.forEach(function(b){a.addEventListener(b,c,l)})})},tb=function(a,b){setTimeout(function(){var c=document.createElement("script");c.setAttribute("async","async");b&&c.addEventListener("load",b,l);c.src=a;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)},40)},ub=function(a,b){a?!document.R&&b&&(document.R=function(a){27==a.keyCode&&b()},document.addEventListener("keyup",
document.R,l)):(document.removeEventListener("keyup",document.R,l),document.R=j)};var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-31000769-1"]);var vb=_gaq,wb=["_gaq"],T=n;!(wb[0]in T)&&T.execScript&&T.execScript("var "+wb[0]);for(var xb;wb.length&&(xb=wb.shift());)!wb.length&&vb!==h?T[xb]=vb:T=T[xb]?T[xb]:T[xb]={};var yb=[1,"app user","creator"];var Q,U,V,W=chrome.i18n.getMessage;var zb=function(a,b){a=a instanceof HTMLElement?[a]:Array.prototype.slice.call(a);a.forEach(function(a){b?a.classList.add("disabled"):a.classList.remove("disabled")})},Ab=function(a){zb($("#install, #download-zip, #share, #unshare, #delete"),a)},X=function(a){zb($("#delete"),a)},Bb=function(a){zb($("#share"),a)},Cb=function(a){zb($("#unshare"),a)},Db=function(){"closed"==this.dataset.state?($("#toggle-stored-themes")[0].dataset.state="open",$("#stored-themes-container")[0].dataset.view="",$("#toggle-stored-themes .animation")[0].innerText=
W("hide_themes")):($("#toggle-stored-themes")[0].dataset.state="closed",$("#stored-themes-container")[0].dataset.view="hidden",$("#toggle-stored-themes .animation")[0].innerText=W("show_all_themes"))},Y=function(a){$("#main-container")[0].setAttribute("disabled",a)},Eb=function(){var a=n.window.location.hash;return a?a.substr(1):j},Fb=function(a){a.preventDefault();this.classList.contains("disabled")||(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey?jb():(location.href=Q.a.urls.crx,x("analytics",{status:"install",
data:{type:"Theme",label:Q.a.guid||"",opt_vars:[yb]}})))},Gb=function(){this.classList.contains("disabled")||jb()},Ib=function(a){a=a?a:"";($("#theme-url > input")[0].value=a)?(Hb(),Z("shared")):Z("unshared")},Jb=function(a,b){$("#share-theme .error-container > .text")[0].innerText=a;Z("unshare-error");setTimeout(t(function(a){Z(a)},j,b),2E3)},Z=function(a){$("#share-theme")[0].dataset.state=a;switch(a){case "shared":$("#unshare")[0].classList.remove("hidden");break;case "unshared":$("#unshare")[0].classList.add("hidden")}},
Kb=function(a,b){Y(l);a?(x("analytics",{status:"unpublish",data:{type:"Theme"}}),x("unshare",{status:"unshared",data:{themeId:b}}),Ib()):(Jb(W("error_while_unpublishing"),"shared"),x("unshare",{status:"error",data:{themeId:b}}))},Lb=function(){this.classList.contains("disabled")||(Q.update(),x("unshare",{status:"unsharing",data:{themeId:Q.k()}}),Y(i),kb(Q)?($("#loading-container .text")[0].innerText=W("Unpublishing"),Z("unsharing"),sb({success:Kb},i)):Kb(i,Q.k()))},Mb=function(a){var b=$("#progress-bar > div")[0];
a=Math.round(100*a.loaded/a.total)+"%";b.style.width=a;b.innerText=a},Ob=function(a,b,c){a&&x("analytics",{status:"upload",data:{type:"Theme"}});Nb(a,b,c)},Nb=function(a,b,c){Y(l);a?(x("analytics",{status:"publish",data:{type:"Theme"}}),x("share",{status:"shared",data:{themeId:b}}),Ib(c),a=$("#progress-bar > div")[0],a.innerText="0%",a.style.width="0%"):(Jb(W("error_while_publishing"),"unshared"),x("share",{status:"error",data:{themeId:b}}))},Pb=function(){this.classList.contains("disabled")||(Q.update(),
Q.B||(Y(i),x("share",{status:"sharing",data:{themeId:Q.k()}}),kb(Q)?Nb(i,Q.k(),R(Q)):mb(Q)?($("#loading-container .text")[0].innerText=W("publishing"),Z("resharing"),sb({success:Nb})):(Z("sharing"),sb({success:Ob,onprogress:Mb}))))},Rb=function(a,b){a?(x("delete",{status:"deleted",data:{themeId:b}}),$("#main-container")[0].dataset.view="deleted",$("#crx-deletion .msg")[0].innerText=W("deleted"),x("analytics",{status:"delete",data:{type:"Theme"}}),setTimeout(function(){Y(l);$("#main-container")[0].dataset.view=
"";Qb(b,i)},2E3)):(x("delete",{status:"error",data:{themeId:b}}),$("#main-container")[0].dataset.view="error-deleting",$("#crx-deletion .msg")[0].innerText=W("delete_theme_error_msg_step4"),setTimeout(function(){Y(l);$("#main-container")[0].dataset.view=""},2E3))},Sb=function(){if(!this.classList.contains("disabled")){Y(i);var a=function(a){a?(Q.update(),x("delete",{status:"deleting",data:{themeId:Q.k()}}),Q.B?Rb(i,Q.k()):($("#main-container")[0].dataset.view="deleting",$("#crx-deletion .msg")[0].innerText=
W("deleting"),Q.S(Rb))):Y(l)},b={title:W("warning"),message:W("delete_theme_confirm_msg",Q.a.name),ok:W("yes"),cancel:W("no")},c=function(){ub(l);d.removeClass("show");$(".ok, .close",d).unbind("click");a&&a(l)},d=$("#confirm-container");$(".title",d).text(b.title);$(".message",d).text(b.message);$(".ok",d).text(b.ok);$(".cancel",d).text(b.cancel);d.addClass("show");$(".ok",d).click(function(){ub(l);d.removeClass("show");$(".ok, .close",d).unbind("click");a&&a(i)});ub(i,c);$(".close",d).click(c)}},
Tb=function(a){var b=$("#themes-container .selected")[0];b&&b.classList.remove("selected");(a=$('#themes-container .stored-theme[data-id="'+a+'"]')[0])&&a.classList.add("selected")},Qb=function(a,b){var c;b?(c=$("#themes-container .stored-theme[data-id="+a+"]")[0],c=!c?j:c.nextElementSibling?c.nextElementSibling.dataset.id:c.previousElementSibling?c.previousElementSibling.dataset.id:j):c="";var d=$("#themes-container div[data-id="+a+"]")[0];d&&(d.parentNode.removeChild(d),V--,0>=V?($("#boo")[0].classList.remove("hidden"),
$("#themes-container")[0].classList.add("hidden")):(d=-188*(0>V-5?0:V-5),U==d?$("#right-theme")[0].classList.add("disabled"):U<d&&($("#right-theme")[0].classList.add("disabled"),Ub("left",i))));c?Vb(c):b&&(Wb(),Xb())},Ub=function(a,b){var c=-188*(V-5);if(b||!("left"==a&&0==U||"right"==a&&U==c)){var d=$("#left-theme")[0],f=$("#right-theme")[0];U+="left"==a?188:-188;d.classList.remove("disabled");f.classList.remove("disabled");0==U&&d.classList.add("disabled");U<=c&&f.classList.add("disabled");$("#themes-container")[0].style.left=
U+"px"}},Yb=function(){this.classList.contains("disabled")||Ub("left-theme"==this.id?"left":"right")},Zb=function(a){37==a.keyCode&&!$("#left-theme")[0].classList.contains("disabled")?Ub("left"):39==a.keyCode&&!$("#right-theme")[0].classList.contains("disabled")&&Ub("right")},ac=function(){var a=localStorage.getItem("themes");try{var b=n.navigator.onLine;V=U=0;a=JSON.parse(a);if(!(0>=a.length)){$("#stored-theme-box")[0].classList.remove("hidden");$("#themes-container").empty();var c=$(".stored-theme.template")[0],
d=document.createDocumentFragment();a.forEach(function(a){if(a=localStorage.getItem(a)){V++;a=JSON.parse(a);var f=c.cloneNode(i);f.classList.remove("template");S(f,"click",$b);f.dataset.id=a.id;/^https?:\/\//.test(a.urls.crx)&&(f.dataset.isonline="true",b||f.classList.add("disabled"));$(".thumb",f)[0].src=a.urls.preview_small;$(".theme-name",f)[0].textContent=a.name;$(".theme-name",f)[0].title=a.name;d.appendChild(f)}});5<V&&$("#right-theme")[0].classList.remove("disabled");$("#themes-container")[0].appendChild(d);
$("#boo")[0].classList.add("hidden");$("#themes-container")[0].classList.remove("hidden");document.addEventListener("keydown",Zb,l)}}catch(f){}};n.window.addEventListener("online",function(){var a=$("#themes-container .stored-theme.disabled");a.removeClass("disabled");a.attr("title","")},l);n.window.addEventListener("offline",function(){var a=$('#themes-container .stored-theme[data-isonline="true"]');a.addClass("disabled");a.attr("title",W("not_available_offline"))},l);
var $b=function(){if(!this.classList.contains("disabled")){var a=this.dataset.id;"true"==this.dataset.isonline?(a=new P(a),a.B||chrome.tabs.create({url:R(a)},j)):Q.k()!=a&&Vb(a)}},bc=function(a){var b="on"==a.state?"plusone":"minusone";a=(a=a.href.match(/\/([^\/]+)$/))?a[1]:"";x("analytics",{status:b,data:{type:"PlusOne",label:a,opt_vars:[yb]}})},Hb=function(){if(n.window.gapi&&gapi.plusone){var a=$("#theme-url > input")[0].value;gapi.plusone.render("theme-plus-one",{annotation:"bubble",href:a,size:"medium",
width:32,callback:bc})}},Wb=function(){Z("unshared");$("#theme-name")[0].innerText="";$("#theme-desc")[0].innerText="";$("#preview-container")[0].dataset.view="";Ab(l)},Xb=function(){$("#preview-container")[0].dataset.view="error";Ab(i)},cc=function(){var a=$("#theme-url input")[0];a.select();a.focus()},Vb=function(a){Wb();Eb()!=a&&window.history.pushState({},"",chrome.extension.getURL("../views/preview.html")+"#"+a);Q=new P(a);Q.B?(Tb(a),Xb()):(document.title=W("page_title",[Q.a.name,W("ext_name")]),
$("#theme-name")[0].innerText=Q.a.name,$("#theme-desc")[0].innerText=Q.a.desc,$("#preview .img")[0].src=Q.a.urls.preview_large,Q.a.urls.zip||zb($("#download-zip"),i),kb(Q)?Ib(R(Q)):Z("unshared"),Tb(a))},dc=function(){chrome.tabs.create({url:chrome.extension.getURL("views/main.html")})};ha("share",function(a){var b=a.data.themeId;if(b||Q.k()==b)switch(a.status){case "sharing":Bb(i);X(i);break;case "shared":Q.update(),Ib(R(Q));case "error":Bb(l),X(l)}});
ha("delete",function(a){var b=a.data.themeId,c=Q.k()==b;switch(a.status){case "deleting":c&&(X(i),Bb(i),Cb(i));break;case "deleted":Qb(b,c);break;case "error":c&&(X(l),Bb(l),Cb(l))}});ha("unshare",function(a){var b=a.data.themeId;if(b||Q.k()==b)switch(a.status){case "unsharing":Cb(i);X(i);break;case "unshared":Q.update(),Ib();case "error":Cb(l),X(l)}});
ha("create",function(a){var b=$("#themes-container .selected")[0],b=b?b.dataset.id:"";ac();b?$("#themes-container > div[data-id="+b+"]")[0].classList.add("selected"):1==JSON.parse(localStorage.getItem("themes")).length&&Vb(a.themeId)});window.___gcfg={lang:db};tb("https://apis.google.com/js/plusone.js",function(){Hb()});tb("https://ssl.google-analytics.com/ga.js");
n.window.addEventListener("load",function(){$("#install .text")[0].innerText=W("install_btn").toUpperCase();$("#share .text")[0].innerText=W("publish_theme");$("#progress-container > .text")[0].innerText=W("publishing");$("#theme-url > .text")[0].innerText=W("theme_unique_url");$("#unshare .text")[0].innerText=W("unpublish");$("#unshare")[0].setAttribute("title",W("unpublish"));$("#delete > .text")[0].innerText=W("delete_theme");$("#delete")[0].setAttribute("title",W("delete_theme"));$("#boo")[0].innerText=
"";$("#stored-theme-footer a")[0].innerText=W("stored_themes_footer");$("#toggle-stored-themes .animation")[0].innerText=W("show_all_themes");$("#footer a")[0].innerText=W("privacy_policy");$("#footer #share-site .text")[0].innerText=W("footer_share_site_txt");$("#theme-name-header")[0].innerText=W("ext_name");$("#launch-app > .text")[0].innerText=W("create_your_own_theme");$("#download-zip > .text")[0].innerText=W("download_theme_zip");var a=W("publishing_zip_help_link"),b,c;(b=a.match(/\[([^\]]*)\]/))?
(c=a.split(b[0]),a=c[0],c=c[1],b=b[1]):b=c="";var d=$("#tooltip-holder > .tooltip")[0];a&&d.appendChild(document.createTextNode(a));a=document.createElement("a");a.href="https://developers.google.com/chrome/web-store/docs/publish";a.target="_blank";a.innerText=b;d.appendChild(a);c&&d.appendChild(document.createTextNode(c));$("#error-content #oops > h1")[0].innerText=W("oops_msg");$("#error-content #oops > .text")[0].innerText=W("preview_error_msg");ac();S($("#install"),"click",Fb);S($("#download-zip .text"),
"click",Gb);S($("#share"),"click",Pb);S($("#delete"),"click",Sb);S($("#unshare"),"click",Lb);S($(".shift-theme"),"click",Yb);S($("#theme-url input"),"click",cc);S($("#toggle-stored-themes"),"click",Db);S($("#launch-app"),"click",dc);S($("#preview .img")[0],"error",function(){this.src="../images/404.png"});window.addEventListener("popstate",function(){Vb(Eb())},l)},l);
