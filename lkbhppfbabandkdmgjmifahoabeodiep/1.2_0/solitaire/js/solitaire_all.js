/*
 * This file is protected by automatic plagiarism detection services and duplication checkers.
 * Content theft and plagiarism is a crime. Any content theft and plagiarism, without exception, 
 * will be prosecuted to the full extent of applicable laws.
 *
 * Copyright 2011-2013 TreeCardGames http://www.treecardgames.com
 * All rights reserved.
*/
!function(){var t={};!function(){"use strict";t.containers={};var e=t.games={};t.startGame=function(i,n){t.gameSettings.lastGame=i+"-"+n,t.game.empty(),t.game.setCurrentGame(new(e[i.capitalize()])(n)),t.ui.updateWithGame(i,n),t.game.play()},t.startPlaying=function(){var e=t.gameSettings.lastGame;if(e){var i=e.split("-");this.startGame(i[0],i[1])}else t.ui.showGameSelector()}}(),function(){"use strict";var e=t.config={version:1,isFreeApp:!0,flipScale:1.2,ifFreeApp:!0,isChromePackagedApp:!!(window.chrome&&window.chrome.app&&window.chrome.app.window),isDebugging:!0,isRetina:window.devicePixelRatio>1,isMobilePhone:function(){var t=navigator.userAgent.toLowerCase();return t.match(/iphone/)?"iPhone":t.match(/android/)&&t.match(/mobile/)?"android":t.match(/windows/)&&t.match(/phone/)?"windows":null}(),useLargeShadow:function(){var t=navigator.userAgent.toLowerCase();return t.match(/safari/)||$.browser.msie&&$.browser.version>=10}(),isiOS:!!navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/),isiOS7:!!navigator.userAgent.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),isApp:window.cordova?"phoneGap":window.WinJS?"windows":!1,easingFunc:"easeOutCubic",undoSpeed:3800,noEnlarging:!1,noDragShadow:!1,noDecoration:!1,animation_time:400,animationSpeed:4800,autoplaySpeed:1100,revertSpeed:4800,automoveSpeed:3800,flipTime:150,minimum_moving_time:200,totalL:4,cL:3};window.navigator.msPointerEnabled?(e.event_touchstart="MSPointerDown",e.event_touchmove="MSPointerMove",e.event_touchend="MSPointerUp"):(e.event_touchstart="touchstart",e.event_touchmove="touchmove",e.event_touchend="touchend"),$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase()),e.useFluctuating=e.isiOS||$.browser.chrome,e.useCardEffects=e.isiOS||$.browser.chrome||!(!navigator.cpuClass||"ARM"===navigator.cpuClass.toUpperCase()),e.noScaling=!(e.isiOS||$.browser.chrome),e.isiOS&&(e.animationSpeed=3800,e.autoplaySpeed=1800,e.revertSpeed=3800,e.automoveSpeed=1800,e.flipTime=200,e.minimum_moving_time=400,e.totalL=8,e.cL=7)}(),function(){"use strict";if(!window.chrome||!window.chrome.storage)return console.log("Chrome storage not available"),t.cachedChromeStorage=null,void 0;var e=chrome.storage.local,i={},n={},o=function(t,e){this.key=t,this.val=e};o.prototype.set=function(t){if(this.val=t,this.updating)this.afterUpdate=function(){this.set(t)};else{var i={};i[this.key]=t,this.updating=!0,e.set(i,function(){this.updating=!1,this.afterUpdate&&(this.afterUpdate(),this.afterUpdate=null)}.bind(this))}},o.prototype.get=function(){return this.val},o.prototype.remove=function(){this.val=null,this.updating?this.afterUpdate=this.remove:(this.updating=!0,e.remove(this.key,function(){this.updating=!1,this.afterUpdate&&(this.afterUpdate(),this.afterUpdate=null)}.bind(this)))},t.cachedChromeStorage={isCached:!0,set:function(t,e){e+="",i[t]||(i[t]=new o(t,n[t]||null)),i[t].set(e)},get:function(t){return i[t]||(i[t]=new o(t,n[t]||null)),i[t].get()},remove:function(t){i[t]||(i[t]=new o(t,n[t]||null)),i[t].remove()},loadToCache:function(t){e.get(null,function(e){n=e,t()})}}}(),window.uniStore=function(){"use strict";var e={};if(window.Windows&&Windows.Storage){var i=Windows.Storage.ApplicationData.current.localSettings.values;e.get=function(t){return null===i[t]||void 0===i[t]?null:""+i[t]},e.set=function(t,e){null===e?i.remove(t):i[t]=e+""},e.remove=function(t){i.remove(t)}}else t.config.isChromePackagedApp?e=t.cachedChromeStorage:(e.set=function(t,e){localStorage.setItem(t,e)},e.get=function(t){return localStorage.getItem(t)},e.remove=function(t){localStorage.removeItem(t)});return e.loadToCache||(e.loadToCache=function(t){t()}),e.allKeys=["treecardgames.data.version","treecardgames.solitaire.lastgame"],e.getVersion=function(){var i=e.get("treecardgames.data.version");return i?parseInt(i,10):e.get("treecardgames.solitaire.lastgame")?0:t.config.version},e.getInt=function(t){var e=this.get(t);return isNaN(e)?0:parseInt(e,10)},e.setVersion=function(t){return e.set("treecardgames.data.version",t)},e}(),function(){"use strict";t.gameSettings={allKeys:["treecardgames.solitaire.language","treecardgames.solitaire.soundOn","treecardgames.solitaire.swingCard1","treecardgames.solitaire.cardEffect","treecardgames.solitaire.useCSS3","treecardgames.solitaire.showMoves","treecardgames.solitaire.showScore","treecardgames.solitaire.showTime","treecardgames.solitaire.autoplayMode","treecardgames.solitaire.background","treecardgames.solitaire.cardback","treecardgames.solitaire.cardset","treecardgames.solitaire.lastgame"],load:function(){this.soundOn=this.soundOn,this.showTime=this.showTime,this.showScore=this.showScore,this._1$=this._1$,this.autoplayMode=uniStore.get(this.prefix+".autoplayMode"),this._0$=this._0$?this._0$:t.config.useFluctuating,this.cardEffect=null===this.cardEffect?t.config.useCardEffects:this.cardEffect,this.useCSS3=this.useCSS3,this.background=this.background,this.cardback=this.cardback,this.cardset=this.cardset},ini:function(){this.autoplayMode="g",this.showTime=!0,this.showScore=!0,this._1$=!1,this._0$=t.config.useFluctuating,this.cardEffect=t.config.useCardEffects,this.soundOn=!0,this.background=t.data.defaultBackground,this.cardback=t.data.defaultCardback,this.cardset=t.data.defaultCardset,this.useCSS3=!0},prefix:"treecardgames.solitaire",_autoplayMode:"s"},Object.defineProperties(t.gameSettings,{language:{get:function(){return uniStore.get(this.prefix+".language")},set:function(t){uniStore.set(this.prefix+".language",t)}},soundOn:{get:function(){return"true"===uniStore.get(this.prefix+".soundOn")},set:function(e){t.audio.toggle(e),uniStore.set(this.prefix+".soundOn",e),e?$("#sound-option").val("on"):$("#sound-option").val("off"),$("#sound-option").slider("refresh")}},_0$:{get:function(){return uniStore.get(this.prefix+".swingCard1")},set:function(e){uniStore.set(this.prefix+".swingCard1",e),e===!0||"true"==e?(t.game.setMovingSwinging(!0),$("#swing-option").val("on").slider("refresh")):(t.game.setMovingSwinging(!1),$("#swing-option").val("off").slider("refresh"))}},cardEffect:{get:function(){return uniStore.get(this.prefix+".cardEffect")},set:function(e){uniStore.set(this.prefix+".cardEffect",e),e===!0||"true"==e?(t.game.setCardEffect(!0),$("#effect-option").val("on").slider("refresh")):(t.game.setCardEffect(!1),$("#effect-option").val("off").slider("refresh"))}},useCSS3:{get:function(){return null===uniStore.get(this.prefix+".useCSS3")?(uniStore.set(this.prefix+".useCSS3",!0),!0):"true"==uniStore.get(this.prefix+".useCSS3")},set:function(t){uniStore.set(this.prefix+".useCSS3",t),t===!0||"true"==t?$("#css3-option").val("on").slider("refresh"):$("#css3-option").val("off").slider("refresh")}},_1$:{get:function(){return"true"===uniStore.get(this.prefix+".showMoves")},set:function(t){t?($("#moves-toggle").attr("checked",!0),$("#display-moves").show(),uniStore.set(this.prefix+".showMoves",!0)):($("#moves-toggle").attr("checked",!1),uniStore.set(this.prefix+".showMoves",!1),$("#display-moves").hide()),$("#moves-toggle").checkboxradio("refresh")}},showScore:{get:function(){return"true"===uniStore.get(this.prefix+".showScore")},set:function(t){t?($("#score-toggle").attr("checked",!0),$("#display-score").show(),uniStore.set(this.prefix+".showScore",!0)):($("#score-toggle").attr("checked",!1),uniStore.set(this.prefix+".showScore",!1),$("#display-score").hide()),$("#score-toggle").checkboxradio("refresh")}},showTime:{get:function(){return"true"===uniStore.get(this.prefix+".showTime")},set:function(t){t?($("#time-toggle").attr("checked",!0),$("#display-time").show(),uniStore.set(this.prefix+".showTime",!0)):($("#time-toggle").attr("checked",!1),uniStore.set(this.prefix+".showTime",!1),$("#display-time").hide()),$("#time-toggle").checkboxradio("refresh")}},autoplayMode:{get:function(){return this._autoplayMode},set:function(t){"disabled"===t?(this._autoplayMode=t,$("#autoplay-option").find("input[value='n']").attr("checked",!0),$("#autoplay-option").find("input[type='radio']").checkboxradio("disable").checkboxradio("refresh")):"enabled"===t?this.autoplayMode=uniStore.get(this.prefix+".autoplayMode"):(this._autoplayMode=t,uniStore.set(this.prefix+".autoplayMode",t),$("#autoplay-option").find("input[value='"+t+"']").attr("checked",!0),$("#autoplay-option").find("input[type='radio']").checkboxradio("enable").checkboxradio("refresh"))}},background:{get:function(){var e=uniStore.get(this.prefix+".background");return e in t.data.gameBackgrounds||(uniStore.set(this.prefix+".background",t.data.defaultBackground),e=t.data.defaultBackground),e},set:function(t){$("#game-ui").css("background-image","url(solitaire/images/backgrounds/1920x1200/"+t+".jpg)"),uniStore.set(this.prefix+".background",t),$("#backgrounds-list>div>.ui-radio-on").removeClass("ui-btn-active").removeClass("ui-radio-on"),$('#backgrounds-list>div>div[data-backgroundname="'+t+'"]').addClass("ui-btn-active").addClass("ui-radio-on")}},cardback:{get:function(){var e=uniStore.get(this.prefix+".cardback");return e in t.data.cardBacks||(uniStore.set(this.prefix+".cardback",t.data.defaultCardback),e=t.data.defaultCardback),e},set:function(t){uniStore.set(this.prefix+".cardback",t),$("#cardbacks-list>div>.ui-radio-on").removeClass("ui-btn-active").removeClass("ui-radio-on"),$('#cardbacks-list>div>div[data-cardbackname="'+t+'"]').addClass("ui-btn-active").addClass("ui-radio-on")}},cardset:{get:function(){var e=uniStore.get(this.prefix+".cardset");return e in t.data.cardSets||(uniStore.set(this.prefix+".cardset",t.data.defaultCardset),e=t.data.defaultCardset),e},set:function(t){uniStore.set(this.prefix+".cardset",t),$("#cardsets-list>div>.ui-radio-on").removeClass("ui-btn-active").removeClass("ui-radio-on"),$('#cardsets-list>div>div[data-cardsetname="'+t+'"]').addClass("ui-btn-active").addClass("ui-radio-on")}},lastGame:{get:function(){return uniStore.get(this.prefix+".lastgame")},set:function(t){uniStore.set(this.prefix+".lastgame",t)}}})}(),function(){"use strict";var e=t.cardData={_time:0,_score:0,_movesCount:0,prefix:"",setName:function(t){this.prefix="treecardgames.solitaire."+t,null===uniStore.get(this.prefix+".firstTime")&&this.ini()},keys:[".firstTime",".gamePlayCount",".gameWinCount",".currentStreak",".currentStreakIsWinning",".longestLosingStreak",".longestWinningStreak",".lastGame",".lastGame.time",".lastGame",".movesCount"],getAllKeys:function(){var t=this.prefix;return this.keys.map(function(e){return t+e})}};Object.defineProperties(e,{time:{get:function(){return this._time},set:function(t){this._time=t;var e,i,n;this._time>3600?(e=Math.floor(this._time/3600),i=Math.floor((this._time-3600*e)/60),n=this._time-3600*e-60*i,10>e&&(e="0"+e),e+=":"):(e="",i=Math.floor(this._time/60),n=this._time-60*i),10>i&&(i="0"+i),i+=":",10>n&&(n="0"+n),$("#display-time>span.display-content").html(""+e+i+n)}},movesCount:{get:function(){return this._movesCount},set:function(t){this._movesCount=t,$("#display-moves>span.display-content").html(t)}},gameScore:{get:function(){return this._score},set:function(t){this._score=t,$("#display-score>span.display-content").html(t)}},gamePlayCount:{get:function(){return uniStore.getInt(this.prefix+".gamePlayCount")},set:function(t){uniStore.set(this.prefix+".gamePlayCount",t)}},gameWinCount:{get:function(){return uniStore.getInt(this.prefix+".gameWinCount")},set:function(t){uniStore.set(this.prefix+".gameWinCount",t)}},currentStreak:{get:function(){return uniStore.getInt(this.prefix+".currentStreak")},set:function(t){isNaN(t)&&(t=0),uniStore.set(this.prefix+".currentStreak",t),this.currentStreakIsWinning?t>this.longestWinningStreak&&(this.longestWinningStreak=t):t>this.longestLosingStreak&&(this.longestLosingStreak=t);var e;e=this.currentStreakIsWinning?t>1?" wins":" win":t>1?" losses":" loss",$("#display-currentStreak").html(t+e)}},currentStreakIsWinning:{get:function(){return"true"==uniStore.get(this.prefix+".currentStreakIsWinning")},set:function(t){uniStore.set(this.prefix+".currentStreakIsWinning",!!t);var e;e=t?this.currentStreak>1?" wins":" win":this.currentStreak>1?" losses":" loss",$("#display-currentStreak").html(this.currentStreak+e)}},longestLosingStreak:{get:function(){return uniStore.getInt(this.prefix+".longestLosingStreak")},set:function(t){isNaN(t)&&(t=0),uniStore.set(this.prefix+".longestLosingStreak",t),$("#display-longestLosingStreak").html(t)}},longestWinningStreak:{get:function(){return uniStore.getInt(this.prefix+".longestWinningStreak")},set:function(t){isNaN(t)&&(t=0),uniStore.set(this.prefix+".longestWinningStreak",t),$("#display-longestWinningStreak").html(t)}}}),e.load=function(){if(!uniStore.get(this.prefix+".lastGame"))return this.gamePlayCount=this.gamePlayCount,this.gameWinCount=this.gameWinCount,this.currentStreak=this.currentStreak,this.currentStreakIsWinning=this.currentStreakIsWinning,this.longestLosingStreak=this.longestLosingStreak,this.longestWinningStreak=this.longestWinningStreak,!1;try{return this.time=uniStore.getInt(this.prefix+".lastGame.time"),this.lastGame=JSON.parse(uniStore.get(this.prefix+".lastGame")),this.gamePlayCount=this.gamePlayCount,this.gameWinCount=this.gameWinCount,this.gameScore=0,this.movesCount=uniStore.getInt(this.prefix+".movesCount"),this.currentStreak=this.currentStreak,this.currentStreakIsWinning=this.currentStreakIsWinning,this.longestLosingStreak=this.longestLosingStreak,this.longestWinningStreak=this.longestWinningStreak,!0}catch(t){return console&&console.log(t),this.clearInfo(),!1}},e.reset=function(){uniStore.set(this.prefix+".lastGame",""),this.time=0,this.movesCount=0,this.gameScore=0},e.clearInfo=function(){this.gamePlayCount=t.game.playing()?1:0,this.gameWinCount=0,this.currentStreak=0,this.currentStreakIsWinning=!1,this.longestLosingStreak=0,this.longestWinningStreak=0},e.ini=function(){this.clearInfo(),this.gamePlayCount=0,uniStore.set(this.prefix+".firstTime","false")},e.winUpdate=function(){uniStore.set(this.prefix+".lastGame",""),this.gameWinCount++,this.currentStreakIsWinning?this.currentStreak++:(this.currentStreakIsWinning=!0,this.currentStreak=1)},e.save=function(){uniStore.set(this.prefix+".lastGame",JSON.stringify(this.lastGame)),uniStore.set(this.prefix+".lastGame.time",this.time),uniStore.set(this.prefix+".movesCount",this.movesCount)}}();var e={};!function(){"use strict";window.location.hash="",String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},window.toStaticHTML||(window.toStaticHTML=function(t){return t}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},o=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),e.dist=function(t,e,i,n){return Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))},e.prefix=function(){for(var t=document.createElement("div"),e=["Moz","Webkit","O","ms"],i=0;i<e.length;++i)if(e[i]+"Transform"in t.style)return e[i]}()}(),t.data={defaultCardset:"big_ben",defaultBackground:"green_felt",defaultCardback:"rhombus_red",gamesList:{golf:{golfeasy:"Golf Easy"},freecell:{freecell:"FreeCell"},klondike:{1:"Klondike",fortythieves:"Forty Thieves",3:"Klondike by Threes"},pyramid:{0:"Pyramid Easy"},spider:{1:"Spider One Suit",2:"Spider Two Suits",4:"Spider"}},cardBacks:{classic_green:"Classic Green",rhombus_blue:"Rhombus Blue",monet:"Monet",cross_blue:"Cross Blue",lawrence:"Lawrence",rose:"Rose",dog:"Dog",cat:"Cat",classic_brown:"Classic Brown",renoir:"Renoir",butterflies:"Butterflies",rhombus_red:"Rhombus Red",classic_red:"Classic Red",rhombus_brown:"Rhombus Brown",rhombus_green:"Rhombus Green",classic_blue:"Classic Blue",cross_red:"Cross Red",cross_brown:"Cross Brown",cross_green:"Cross Green"},cardSets:{large_print_london:"Large Print London",big_ben:"Big Ben",modern:"Modern",large_print:"Large Print",large_print_modern:"Large Print Modern"},gameBackgrounds:{light_wood:"Light Wood",green_felt:"Green Felt",red_felt:"Red Felt",blue_felt:"Blue Felt",parquet:"Parquet",dark_wood:"Dark Wood"}},function(){"use strict";var e=window.webkitAudioContext||window.mozAudioContext||window.MSAudioContext;if(!e)return t.webAudio=null,void 0;var i=t.webAudio={},n=new e;i.unmuteIOS=function(){i.loadBuffer(i.getPath("card_drop"),function(t){t.gain=0;var e=n.createBufferSource();e.buffer=t,e.connect(n.destination),e.noteOn(0)})},i.loadBuffer=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var t=n.createBuffer(i.response,!0);e(t)},i.send()};var o=i.Sound=function(t){this.on=!1,this.filename=t,this.source=null,i.loadBuffer(i.getPath(t),function(t){this.on=!0,this.buffer=t,i.soundReadyHandler&&i.soundReadyHandler()}.bind(this))};o.prototype.stop=function(){this.on&&this.source.noteOff(0)},o.prototype.play=function(){if(this.on){var t=n.createBufferSource();t.buffer=this.buffer,t.connect(n.destination),this.source=t,this.source.noteOn(0)}}}(),function(){"use strict";var e=t.config,i=$.browser.msie?1:7,n=null,o=0,s=!1,a=!1,r=$.Deferred(),c=function(){a||0===o&&r.resolve()};if(t.webAudio)n=t.webAudio.Sound,t.webAudio.soundReadyHanlder=function(){o--,c()},t.webAudio.getPath=function(t){return"solitaire/sounds/mp3/"+t+".mp3"};else if(e.isApp&&e.isiOS)n=function(t){this.on=!1,this.filename=t;var e=this;document.addEventListener("deviceready",function(){LowLatencyAudio.preloadFX(e.filename,"solitaire/sounds/aac/"+e.filename+".m4a",function(){e.on=!0})},!1)},n.prototype.stop=function(){this.on&&LowLatencyAudio.stop(this.filename)},n.prototype.play=function(){this.on&&LowLatencyAudio.play(this.filename)};else if(!e.isiOS){var h=!0;try{new Audio}catch(u){h=!1}h&&(n=function(t,e){e=e||i,console.log(e,t,"created"),this.on=!0,this.filename=t,this.doms=[];for(var n=0;e>n;n++){var a=new Audio;a.preload="auto",this.doms.push(a),o++,$(a).on("canplay",function(){o--,c(),this.pause(),this.volume=1,s=!0});var r=document.createElement("source");r.src="solitaire/sounds/mp3/"+t+".mp3",r.type="audio/mpeg",a.appendChild(r),r=document.createElement("source"),r.src="solitaire/sounds/ogg/"+t+".ogg",r.type="audio/ogg",a.appendChild(r),a.volume=0,a.load()}},n.prototype.stop=function(){this.doms.forEach(function(t){t.pause(),t.currentTime=0})},n.prototype.play=function(){if(this.on){var t=this.doms.reduce(function(t,e){return t.currentTime?e.currentTime?t.currentTime>e.currentTime?t:e:e:t});t.pause(),t.currentTime=0,t.play()}})}n||(n=function(){},n.prototype.stop=function(){},n.prototype.play=function(){});var d=t.audio={on:!1};d.loadSounds=function(t){this.dict=t;for(var e in t)this[e]=t[e]instanceof Array?new n(t[e][0],t[e][1]):new n(t[e])},d.loadSounds({drop:"card_drop",flip:"card_flip",stockflip:"stock_flip",redeal:["redeal",1],autoplay:"autoplay",dealanimation:["deal_animation",1],undo:"undo",redo:"redo",gamewon:["game_won",1]}),d.toggle=function(t){this.on=t;for(var e in this.dict)this[e].on=t},d.getDeferred=function(){return r},setTimeout(function(){s||(r.resolve(),a=!0)},5e3)}(),function(){"use strict";function e(e){return function(){o.isApp&&t.ui.gameAlert("Error","Resource file not found: "+e+"<br />Please reinstall the App."),console&&console.log(e+" fail to download")}}function i(t){var i,n,o=[];if(l&&!r["theme-"+h]){for(i=1;14>i;i++)for(n=0;4>n;n++)o.push("solitaire/images/cards/"+h+"/146x198/"+i+"_"+p[n]+".png");["foundation","redeal","reserve","stop","tableau"].forEach(function(t){o.push("solitaire/images/spots/146x198/"+t+"_spot.png")})}if(d&&!r["back-"+c]&&o.push("solitaire/images/backs/146x198/"+c+".png"),f&&!r["background-"+u]&&o.push("solitaire/images/backgrounds/1920x1200/"+u+".jpg"),!o.length)return t(),void 0;var s={decrement:function(){this._counter--,0===this._counter&&(r["theme-"+h]=!0,r["back-"+c]=!0,r["background-"+u]=!0,t())}};s._counter=o.length;var a=$("#game-ui");o.forEach(function(t){var i=document.createElement("img");i.onerror=e(t),i.src=t,i.onload=function(){s.decrement()},i.style.display="none",a.append(i)})}var n=t.resources={},o=t.config,s=[],a=[],r={},c="",h="",u="",d=!1,l=!1,f=!1,p=["s","h","c","d"],g=function(t,e){return"solitaire/images/cards/"+h+"/146x198/"+e+"_"+p[t]+".png"};n.clear=function(){s=[],a=[]},n.changeCardImagesToSuits=function(t){s.forEach(function(e,i){e.raw[0]=i%t,e.img.src=g(e.raw[0],e.raw[1])})},n.getCardImage=function(t,e){var i=document.createElement("img");return i.src=g(t,e),s.push({raw:[t,e],img:i}),i},n.getCardBackImage=function(){var t=document.createElement("img");return t.src="solitaire/images/backs/146x198/"+c+".png",a.push(t),t},n.getTableauImage=function(){var t=document.createElement("img");return t.src="solitaire/images/spots/146x198/tableau_spot.png",t},n.getFoundationImage=function(){var t=document.createElement("img");return t.src="solitaire/images/spots/146x198/foundation_spot.png",t},n.getReserveImage=function(){var t=document.createElement("img");return t.src="solitaire/images/spots/146x198/reserve_spot.png",t},n.getStopSpotImage=function(){var t=document.createElement("img");return t.src="solitaire/images/spots/146x198/stop_spot.png",t},n.getRedealImage=function(){var t=document.createElement("img");return t.src="solitaire/images/spots/146x198/redeal_spot.png",t},n.setCardset=function(t){t!=h&&(h=t,l=!0)},n.setCardback=function(t){t!=c&&(c=t,d=!0)},n.setBackground=function(t){t!=u&&(u=t,f=!0)},n.updateImages=function(){l&&(s.forEach(function(t){t.img.src="solitaire/images/cards/"+h+"/146x198/"+t.raw[1]+"_"+p[t.raw[0]]+".png"}),l=!1),d&&(a.forEach(function(t){t.src="solitaire/images/backs/146x198/"+c+".png"}),d=!1),f=!1},n.download=function(t){var e=$.Deferred();return i(function(){e.resolve()}),t instanceof Function&&e.done(t),e};var m={counter:0,defereed:$.Deferred(),loadedOne:function(){this.counter--,0===this.counter&&this.loaded&&this.loaded()}};n.getExtraImage=function(t){var e=document.createElement("img");return m.counter++,e.onload=function(){m.loadedOne()},e.src=t,e},n.doneExtraImages=function(){var t=$.Deferred();return m.loaded=function(){t.resolve()},0===m.counter&&t.resolve(),t}}(),function(){"use strict";function i(t,e){if(this.name=t,this.variation={},e){for(var i in e)this.variation[i]={},this.variation[i].displayName=e[i],this.variation[i].ssPath=this.pathPrefix+this.variation[i].displayName.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")+this.pathSuffix;e[""]&&(this.variation[""]={displayName:e[""]},this.variation[""].ssPath=this.pathPrefix+this.variation[""].displayName.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")+this.pathSuffix)}else this.variation[""]={displayName:this.name.capitalize(),ssPath:this.pathPrefix+this.name.toLowerCase()+this.pathSuffix}}var n=t.ui={},o=t.config,s=t.data,a=t.resources,r={};n.modal={show:function(){$("#darkenArea").removeClass("hidden")},hide:function(){$("#darkenArea").addClass("hidden")},clickOnce:function(t){$("#darkenArea").on("click",function(){$("#darkenArea").off("click"),t()})},click:function(){$("#darkenArea").click()}},n.loading={show:function(){n.modal.show(),$("#loadingBox").show()},hide:function(){$("#loadingBox").hide(),n.modal.hide()}},n.updateWithGame=function(t,e){e+="";var i=r[t].variation[e].displayName;$("#gameName").html(i),$('#rules-dialog>div[data-role="header"]>h1').html(i),c="solitaire/help/rules/"+i.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")+".htm"},n.raphPie=function(t,e){t.innerHTML="";var i=Raphael(t);i.customAttributes.segment=function(t,e,i,n,o){var s=o-n>180,a=Math.PI;return n=n%360*Math.PI/180,o=o%360*Math.PI/180,s&&(a=0),0===(n-o)%360?{}:{path:[["M",t,e],["l",i*Math.cos(n),i*Math.sin(n)],["A",i,i,0,+s,1,t+i*Math.cos(o),e+i*Math.sin(o)],["z"]]}};var n,o,s=i.set(),a=i.circle(140,110,0).attr({stroke:"#fff","stroke-width":4});0===e[1].data&&0===e[0].data?a.attr({fill:"grey"}):0===e[0].data?a.attr({fill:e[1].color}):0===e[1].data&&a.attr({fill:e[0].color});var r=function(t){var i,o=0;for(c=0;h>c;c++)i=360/n*e[c].data,s[c].animate({segment:[140,110,99,o,o+=i]},t||1500,"bounce"),s[c].angle=o-i/2};n=0;for(var c=0,h=e.length;h>c;c++)n+=e[c].data;for(o=0,c=0;h>c;c++){var u=360/n*e[c].data;!function(t,a){e[t].name+=n>0?" "+e[t].data+" ("+Math.round(1e3*(e[t].data/n))/10+"%)":" 0 (0%)";var r=i.path().attr({segment:[140,110,1,o,o+a],stroke:"#fff",fill:e[t].color});s.push(r),i.text(265,20+25*t,e[t].name).attr({font:'100 15px "Helvetica Neue", Helvetica, "Arial Unicode MS", Arial, sans-serif',fill:"#000","text-anchor":"start"}),i.circle(255,20+25*t,4).attr({stroke:"none",fill:e[t].color})}(c,u),o+=u}a.animate({r:100},1e3,"bounce"),n>0&&r(1e3)};var c;i.prototype.pathPrefix="solitaire/images/solitaire_preview/",i.prototype.pathSuffix=".jpg",i.prototype.pathPrefix+=o.isMobilePhone?"small/":"large/",o.isRetina&&(i.prototype.pathSuffix="@2x.jpg"),i.prototype.createElements=function(){var e=[];for(var i in this.variation){var s=document.createElement("span");s.className="game",o.isMobilePhone&&(s.className+=" onphone"),$(s).html(this.variation[i].displayName).prepend(t.resources.getExtraImage(this.variation[i].ssPath)).click(function(e,i){return function(){n.backToGame(),t.startGame(e,i)}}(this.name,i)),e.push([this.variation[i].displayName,s])}return e};var h=0;if(n.loadGames=function(t){var e=[];for(var n in s.gamesList){var o=new i(n,s.gamesList[n]);r[n]=o;for(var a=o.createElements(),c=0;c<a.length;c++)e.push(a[c])}e.sort(function(t,e){return t[0].localeCompare(e[0])});var u=document.createDocumentFragment();e.forEach(function(t){u.appendChild(t[1])}),t.append(u),h=e.length},n.loadAppearanceOptions=function(){function e(e){return function(){var i=$(this).data(e+"name");t.gameSettings[e]=i,n.loading.show(),a["set"+e.capitalize()](i),a.download(function(){n.loading.hide(),a.updateImages()})}}function i(t,i,n,o,s){var a=document.createDocumentFragment(),r=["a","b","c","d","e"],c=0;for(var h in t){var u=document.createElement("div");u.className="columnButtonWrapper ui-block-"+r[c];var d=document.createElement("div");d.setAttribute("data-theme","c"),d.className="ui-btn ui-corner-all ui-btn-up-c",c=(c+1)%s;var l=document.createElement("a");l.href="#";var f=new Image;f.src=n+h+"."+o,l.appendChild(f);var p=document.createElement("span");p.innerHTML=t[h],$(d).data("icon",!1).attr("data-"+i+"name",h).append(l).append(p).click(e(i)),u.appendChild(d),a.appendChild(u)}$("#"+i+"s-list").append(a)}i(s.gameBackgrounds,"background","solitaire/images/backgrounds/thumbnails/","jpg",3),i(s.cardSets,"cardset","solitaire/images/cards/thumbnails/","png",3),i(s.cardBacks,"cardback","solitaire/images/backs/thumbnails/","png",5)},n.showGameSelector=function(){n.adjustGameSelector(),n.showPopup("main-ui"),t.game.running()?$("#back-to-game").show():$("#back-to-game").hide()},n.adjustGameSelector=function(){if(!o.isMobilePhone){var t=Math.min(window.innerHeight-220,200*Math.ceil(h/3));$("#games-content").height(t)}var e=$(".game").outerWidth(!0),i=window.innerWidth;i>900&&(i=900),5>h&&i>2.5*e&&(i=2.5*e),$("#group-games").width(Math.floor((i-30)/e)*e),$("#main-ui-popup").css("left",(window.innerWidth-$("#main-ui-popup").width())/2).css("visibility","visible")},n.gameAlert=function(t,e,i){$("#info-title").html(t),$("#info-content").html(e),n.showPopup("info-dialog"),$("#alert-button").off("click"),i&&$("#alert-button").on("click",i)},n.backToGame=function(){$.mobile.changePage("#game-ui")},o.isMobilePhone)n.showPopup=function(t){$("html").addClass("with-phone-popup"),$.mobile.changePage("#"+t)},$(document).on("pagechange",function(e,i){"game-ui"===i.toPage[0].id&&($("html").removeClass("with-phone-popup"),t.game.updateDisplay())});else{var u=$();n.showPopup=function(t){var e=0;1==u.length&&u.attr("id")!==t&&(u.popup("close"),e=100),u=$("#"+t),setTimeout(function(){u.popup("open",{tolerance:1,positionTo:"window"})},e)}}n.showRules=function(){$.mobile.showPageLoadingMsg(),$.get(c,function(t){document.querySelector('#rules-dialog>div[data-role="content"]').innerHTML=toStaticHTML(t),n.showPopup("rules-dialog"),$.mobile.hidePageLoadingMsg(),t=null})},o.isDebugging&&o.isApp&&(window.onerror=function(t,e,i){var n="Error in file: "+e+"\nline number:"+i+"\nMessage:"+t;return alert("Error Found !!!\n--------------\n"+n),!0},setTimeout(function(){alert("This is the debugging version!")},5e3));var d=e.prefix.toLowerCase()+"Hidden";document.addEventListener(e.prefix.toLowerCase()+"visibilitychange",function(){document[d]?t.game.timer.pause():t.game.timer.start()},!1)}(),function(){"use strict";var e=t.display={};e.cardSep=0,e.cwidth=0,e.cheight=0,e.cardStaticShadow="",e.highlightShadow="",e.hoverShadow="",e.cardStaticShadow="",e.borderRadius=0,e.playAreaHeight=0,e.playAreaWidth=0,e.scaling=1.2,e.dragShadow="10px 10px 10px rgba(0,0,0,0.6)",e.adjust=function(t){e.cwidth=t.cwidth,e.cheight=t.cheight,e.cardSep=0|t.cheight/4,e.playAreaHeight=t.height,e.playAreaWidth=t.width,e.cardStaticShadow="1px "+Math.floor(3/198*e.cheight)+"px 6px "+Math.floor(2/198*e.cheight)+"px rgba(60, 60, 60, 0.5)",e.highlightShadow="0 0 "+Math.floor(7/198*e.cheight)+"px "+Math.floor(9/198*e.cheight)+"px #83e3f7",e.hoverShadow="0 0 "+Math.floor(7/198*e.cheight)+"px "+Math.floor(7/198*e.cheight)+"px #f8f465",e.cardStaticShadow="0 0 "+Math.floor(9/198*e.cheight)+"px rgba(80, 80, 80, 0.5)",e.borderRadius=Math.floor(10*e.cheight/198)}}(),function(){"use strict";var e=t.winAnimations={},i=t.display,n={},o=null,s=null,a=function(){},r=0;n.throwOut=function(){!function t(e){if(e===o.length)setTimeout(function(){t(e+1)},500);else if(e===o.length+1)a();else{for(;o[e].cards.length>0;)$(o[e].lastCard().dom).stop().css("zIndex",10+e).transition({rotate:720*Math.random()+"deg",x:.1*-i.playAreaWidth+Math.random()*1.2*i.playAreaWidth>>0,y:Math.random()*(i.playAreaHeight-1.3*i.cheight)>>0},1e3,"easeOutCirc"),o[e].popCard();r=setTimeout(function(){t(e+1)},700)}}(0)},n.randomShow=function(){var t=2e3/s.length;$(".card").css("opacity",0);for(var e=[],n=[],o=0;o<s.length;o++)n.push(o);for(var o=0;o<s.length;o++){var c=Math.floor(Math.random()*n.length);e.push(n[c]),n[c]=n[n.length-1],n.pop()}!function n(o){o===e.length?a():(s[e[o]].jdom.css({x:Math.floor(Math.random()*(i.playAreaWidth-1.2*i.cwidth)),y:Math.floor(Math.random()*(i.playAreaHeight-1.3*i.cheight)),zIndex:100+o}).transition({opacity:1}),r=setTimeout(function(){n(o+1)},t))}(0)},e.start=function(t,e,i){a=i,o=t,s=e,n.throwOut()},e.stop=function(){clearTimeout(r),s.forEach(function(t){t.jdom.stop()}),s=null,o=null}}(),function(){"use strict";var i,n=t.game={},o=t.config,s=t.display,a=t.ui,r=t.audio,c=t.cardData,h=null,u=null,d=null,l=null,f=null,p="windows"===o.isApp?15:0,g=0,m=function(){var t=0;return{INIT:t++,WAITING:t++,DRAGSTART:t++,MOVING:t++,POSTMOVE:t++,AUTOFILLING:t++,END:t++}}(),v=n.timer={_timer:0,start:function(t){clearInterval(this._timer),void 0!==t&&(c.time=t),this._timer=setInterval(function(){v._increTimer()},1e3)},pause:function(){clearInterval(this._timer)},_increTimer:function(){c.time++}};n.state=m.INIT,n.setGameDom=function(t){f=t,f.click(function(){n.hideHint()})},n.onMoveOccurred=null;var y=0,w=function(){clearTimeout(y),n.onMoveOccurred&&(y=setTimeout(function(){n.onMoveOccurred()},700))},b=0;n.scheduleUpdateDisplay=function(t){clearTimeout(b),b=setTimeout(n.updateDisplay,t)},n.updateDisplay=function(){if(h){var e=f.width(),i=f.height()-p;t.display.adjust(h.adjustLayout(e,i)),u.css({height:s.cheight,width:s.cwidth,"border-radius":s.borderRadius}),h.containers.forEach(function(t){t.adjustPos()}),K&&K.h.transition({position:"absolute",height:K.end.pos.y-K.start.pos.y+s.cheight,width:s.cwidth,top:0,left:0,x:K.start.pos.x,y:K.start.pos.y,zIndex:K.start.pos.z-1,borderRadius:s.borderRadius},K.start.time)}},n.empty=function(){h&&(n.save(),n.hints.length=0,n.hideHint(),h.clear())},n.setCurrentGame=function(t){this._cur=h=t,u=$(t.frag.childNodes),t.cards.forEach(function(t){t.animating=!0}),i=t.containers.map(function(){return!1}),u=u.add(u.find(".cardFront, .cardBack")),f.append(t.frag),n.updateDisplay()
},n.play=function(){c.load()?c.lastGame.isReset?n.start(!0):n.load():(n.state=m.END,n.start())},n.start=function(t){var e=n.state!==m.END;n.hints.length=0,n.init(),n.hideHint(),n.state=m.INIT,v.start(0),v.pause(),c.reset(),t||(e&&(c.currentStreakIsWinning?(c.currentStreakIsWinning=!1,c.currentStreak=1):c.currentStreak++),c.gamePlayCount++),h.init(function(){n.state=m.POSTMOVE,oe(700),te.length=0,ee.length=0,v.start()})},n.init=function(){$(".card").stop().css({opacity:"",rotate:"0deg"}),clearTimeout(g),se()},n.save=function(){h&&n.state!==m.END&&n.state!==m.INIT&&(c.lastGame={undoStack:te,redoStack:ee,game:h.gameState()},c.save())},n.load=function(){n.hints.length=0,n.hideHint(),n.init(),n.state=m.INIT,v.start(),v.pause();var t=c.lastGame;te.length=0,t.undoStack&&t.undoStack.forEach(function(t){te.push(t)}),ee.length=0,t.redoStack&&t.redoStack.forEach(function(t){ee.push(t)}),h.loadGameState(t.game,function(){n.state=m.POSTMOVE,oe(700),v.start()})};var S=0,k=[],C=[],x=0,M=0,A=0,T=0,E=!1,I=function(t,e){return Math.max(Math.abs(t-x),Math.abs(e-M))<=s.cheight/5};n.initialiseDrag=function(t,e,i){if(n.state===m.WAITING&&!t.moving&&!t.flipping){se(),n.hideHint(!0),E=!!i,n.state=m.DRAGSTART,S=0,k=[],C=[];for(var o=t.ind;o<t.ownedBy.cards.length;o++){var s=t.ownedBy.cards[o];k.push(s),C.push(s.dom)}x=e.x,M=e.y,A=0|parseInt($(t.dom).css("x"),10),T=0|parseInt($(t.dom).css("y"),10),C=$(C),C.removeTransition()}};var P=function(t){t.preventDefault();var e,i;if(t.originalEvent.changedTouches){var o=t.originalEvent.changedTouches[0];e=o.clientX,i=o.clientY}else e=t.originalEvent.clientX,i=t.originalEvent.clientY;n.state===m.MOVING?d(e,i):n.state===m.DRAGSTART&&h.movable(k[0])&&(k.forEach(function(t){t.moving=!0}),U())},_=null,L=0,H=0,B=function(t,e){C.css({x:A+t-x,y:function(t){return T+e-M+t*s.cardSep}})},O=function(){var t=k[0].hasShadow?s.cardStaticShadow:"";C.find(".cardFront").stop().transition({scaleX:1,scaleY:1,"box-shadow":t},k[0].time)},W=e.prefix+"Transition",j=e.prefix+"Transform",F="-"+e.prefix.charAt(0).toLowerCase()+e.prefix.substr(1)+"-transform ",G=0,R=function(){S=0,_.transition({x:0,y:0,rotate:0},500,"easeInCubic")},N=function(t,e){var i=A+t-x,n=T+e-M;if(i!==L||n!==H){clearTimeout(G);var o,a,r=i-L;0>r?(r>S&&(r=S),S=r,o=450/(10-r)-45,a=-2):(S>r&&(r=S),S=r,o=-450/(10+r)+45,a=2),L=i,H=n,_.each(function(t){this.style[W]=F+100+"ms ease",this.style[j]="translate3d(0, -"+s.cardSep*t+"px, 0)rotate("+(o+a*t)+"deg) translate3d(0, "+s.cardSep*t+"px, 0) scale("+1.2+")"}),C.css({x:i,y:function(t){return s.cardSep*t+n}}),G=setTimeout(R,200)}},D=function(){if(n.state===m.MOVING){clearTimeout(G);var t=k[0].hasShadow?s.cardStaticShadow:"";_.each(function(){this.style[W]=F+k[0].time+"ms ease",this.style[j]="",this.style.boxShadow=t})}};d=N,l=D,n.setMovingSwinging=function(t){t?(d=N,l=D):(d=B,l=O)},n.setCardEffect=function(t){t?(delete $.cssHooks.boxShadow,delete $.cssHooks.ieBoxShadow,s.scaling=1.2,h&&h.cards.forEach(function(t){t.setShadow(t.hasShadow),t.setHoverEffect(!0)}),$(".bottomButton").css("box-shadow","")):($(".bottomButton").css("box-shadow","none"),$(".cardBack, .cardFront").css("boxShadow","none"),h&&h.cards.forEach(function(t){t.setHoverEffect(!1)}),$.cssHooks.boxShadow={get:function(){return null},set:function(){}},$.cssHooks.ieBoxShadow={get:function(t){return t.style.boxShadow},set:function(t,e){t.style.boxShadow=e}},s.scaling=1)};var U=function(){C.stop().each(function(t){this.style.zIndex=200+t,this.style.boxShadow="none",this.style.webkitTransition="",this.style.MSTransition=""}).find(".cardFront").transition({scaleX:s.scaling,scaleY:s.scaling,"box-shadow":t.display.dragShadow},100,"linear"),_=C.find(".cardFront"),L=parseInt(C.css("x"),10),n.state=m.MOVING},z=function(t,e){var i,n,o;return t.left<e.left?(i=t,n=e):(i=e,n=t),i.right<n.left?0:(o=i.right>n.right?n.right-n.left:i.right-n.left,t.top<e.top?(i=t,n=e):(i=e,n=t),i.bottom<n.top?0:o*=i.bottom>n.bottom?n.bottom-n.top:i.bottom-n.top)},q=function(e,i){var a,c;if((n.state===m.DRAGSTART||n.state===m.MOVING)&&I(e,i)){if(a=h.cardClicked(k[0]))return l(),n.state=m.WAITING,g=setTimeout(function(){r.drop.play()},a),oe(0),void 0;if(n.requestAutomove(k[0],!0))return l(),n.state=m.WAITING,void 0}if(n.state===m.DRAGSTART)n.state=m.WAITING;else if(n.state===m.MOVING){if(G&&clearTimeout(G),l(),n.state=m.WAITING,!(E&&Math.max(Math.abs(e-x),Math.abs(M-i))<=s.cheight/5&&n.requestAutomove(k[0]))){var u=0,d=-1,f={left:parseInt($(k[0].dom).css("x"),10),top:parseInt($(k[0].dom).css("y"),10)};for(f.right=f.left+s.cwidth*s.scaling,f.bottom=f.top+s.cheight*s.scaling,c=0;c<h.containers.length;c++){var p=z(h.containers[c].toRect(),f);p>u&&h.testAccept(k,h.containers[c])&&(u=p,d=c)}if(clearTimeout(G),-1===d){for(t.containers.Card.speed=o.revertSpeed,k[0].adjustPos(),c=1;c<k.length;c++)k[c].adjustPos(k[0].time+70*c);k[0].ownedBy.adjustZ(k[0].time+70*k.length-70),g=setTimeout(function(){r.drop.play()},k[0].time),t.containers.Card.speed=o.animationSpeed}else{var v=h.getMoveWhenDrop(k,h.containers[d]),y={};for(c=0;c<v.length;c++)c>0&&(y.chain=!0),n.performMove(v[c].cards,v[c].des,void 0,y,!0);a=Y(),n.state=m.WAITING,g=setTimeout(function(){r.drop.play()},a),oe(a)}}k=[],_=null}};$(document).on("mousemove",P).on(o.event_touchmove,P).on("mouseup",function(t){q(t.clientX,t.clientY)}).on(o.event_touchend,function(t){var e=t.originalEvent;e.changedTouches?q(e.changedTouches[0].clientX,e.changedTouches[0].clientY):q(e.clientX,e.clientY)}).on(o.event_touchmove,".phone-popup, .ui-popup-container",function(t){t.stopPropagation()});var V=function(t,e,i,n){var o=t[0].ownedBy,s={from:h.containers.indexOf(o),to:h.containers.indexOf(e),cards:t.map(function(t){return t.objid}),chain:n.chain,isTakeOver:n.isTakeOver};n.flipLast&&e.lastCard().flip(!0),n.flipLastFrom&&o.lastCard().flip(!0),n.flipCards&&(t.forEach(function(t){t.flip(!t.flipped)}),s.flipCards=!0),n.reversed&&(t=t.reverse(),s.reversed=!0,s.cards=t.map(function(t){return t.objid}));for(var a=t.length;a--;)o.popCard();t.forEach(function(t){t.jdom.trigger("mouseout")}),o.popNeedUpdate&&X(o),e.takeIn(t,!0),X(e);var r=o.lastCard();r&&o.shouldFlipLast()&&r.flipped&&(r.flip(!1),o.flipUpdate(),s.flipLast=!0),r=e.lastCard(),r&&e.shouldFlipLast()&&r.flipped&&(r.flip(!1),e.flipUpdate(),s.flipLastFrom=!0),1===i?(ee.push(s),c.movesCount+=1):2===i?te.push(s):(te.push(s),ee.length=0,c.movesCount+=1),h.moveOccurred(o,e,t.length),w()},X=function(t){i[h.containers.indexOf(t)]=!0},Y=function(){for(var t=0,e=0;e<i.length;e++)i[e]&&(t=Math.max(h.containers[e].adjustPos(),t),i[e]=!1);return t};n.performMove=function(t,e,i,o,s){return n.hideHint(),o||(o={}),e instanceof Array?e.forEach(function(e,n){n>0&&(o.chain=!0),V(t[n],e,i,o)}):V(t,e,i,o),J=!0,n.computeHints(),s?0:Y()},n.requestTakeOver=function(t,e,i){if(n.state!==m.WAITING)return!1;e.cards[0];var o=n.performMove(e.cards.slice(0),t,void 0,{flipCards:i,reversed:!0,isTakeOver:!0});return r.redeal.play(),oe(o),!0};var K=null;n.requestLongHint=function(t,e){var i=$(document.createElement("div")).addClass("long-highlight").css({position:"absolute",height:e.pos.y-t.pos.y+s.cheight,width:s.cwidth,top:0,left:0,x:t.pos.x,y:t.pos.y,zIndex:t.pos.z-1,borderRadius:s.borderRadius}).transition({boxShadow:s.highlightShadow,ieBoxShadow:s.highlightShadow},200);i[0].ondragstart=function(){return!1},f.append(i);for(var n=t.ind;n<=e.ind;n++)t.ownedBy.cards[n].inHint=i[0],t.ownedBy.cards[n].jdom.trigger("mouseout");K={start:t,end:e,h:i}},n.removeLongHint=function(){for(var t=K.start.ind;t<=K.end.ind;t++)K.start.ownedBy.cards[t].inHint=null;K.h.remove(),K=null},n.hints=[],n.curHint=null,n.hintInd=0;var J=!0,Z=!1,Q=null;n.hideHint=function(t){Q=t?n.curHint:null,n.curHint&&(n.curHint.from&&n.curHint.from.setHighlight(!1),n.curHint.to&&n.curHint.to.setHighlight(!1),n.curHint=null)},n.showHint=function(){if((n.state===m.WAITING||n.state===m.POSTMOVE)&&!J){if(0===n.hints.length){var t=h.getSpecialHint();t&&(n.hideHint(),n.curHint=t,n.hintInd=-1)}else{var e=n.hints.indexOf(n.curHint)+1||n.hintInd+1;e%=n.hints.length,n.hintInd=e,n.hideHint(),n.curHint=n.hints[e]}n.curHint.from&&n.curHint.from.setHighlight(!0,n.curHint.length),n.curHint.to&&n.curHint.to.setHighlight(!0)}},n.computeHints=function(){Z||(this.hints.length=0,h.computeHints(this.hints),J=!1)};var te=[],ee=[];window.eh=te;var ie=function(t,e){t.isTakeOver&&(h.undoTakeOver(h.containers[t.from],h.containers[t.to]),t.cards||(t.cards=h.stocks[0].cards.map(function(t){return t.objid}))),n.performMove(t.cards.map(function(t){return h.cards[t]}),h.containers[t.from],e,{flipLast:t.flipLast,flipLastFrom:t.flipLastFrom,flipCards:t.flipCards,reversed:t.reversed,chain:t.chain,isTakeOver:t.isTakeOver})};n.applyUndo=function(){if(n.state===m.WAITING&&te.length){r.undo.play();var t,e=!1,i=0;do t=te.pop(),e=t.chain,i?i>0&&(t.chain=!0):t.chain=!1,i++,ie(t,1);while(e);n.computeHints()}},n.applyRedo=function(){if(n.state===m.WAITING&&ee.length){r.redo.play();var t,e=!1,i=0;do t=ee.pop(),e=t.chain,i?i>0&&(t.chain=!0):t.chain=!1,i++,ie(t,2);while(e);oe(700)}},n.restart=function(){for(n.state=m.INIT,n.hints.length=0,n.hideHint(),Z=!0;te.length;)ie(te.pop(),1);Z=!1,n.computeHints(),ee.length=0,v.start(0),v.pause(),g=setTimeout(function(){v.start(),n.state=m.POSTMOVE},700),oe(700)},n.running=function(){return!!h},n.playing=function(){return n.state!==m.END},n.autoFill=function(){var e=h.getAutoFillMove();if(e){t.containers.Card.speed=o.autoplaySpeed;var i=n.performMove(e.cards,e.destination,void 0,{chain:e.chain});t.containers.Card.speed=o.animationSpeed,r.autoplay.play(),oe(i)}else n.computeHints(),n.testEnd()};var ne=0,oe=function(t){se(),ne=setTimeout(n.autoFill,t)},se=function(){clearTimeout(ne)};n.testEnd=function(){h.isWon()?(a.modal.show(),a.modal.clickOnce(function(){a.modal.hide(),a.showPopup("win-dialog"),t.winAnimations.stop()}),t.winAnimations.start(h.foundations,h.cards,function(){a.modal.click()}),n.state=m.END,v.pause(),r.gamewon.play(),c.winUpdate()):h.isLost(this.hints)?(n.state=m.WAITING,a.showPopup("nomoremove-dialog")):n.state=m.WAITING},n.getMaxmove=function(t){return h.getMaxmove(t)},n.getFlipScale=o.noScaling?function(){return 1}:function(){return h.flipScale},n.requestAutomove=function(e,i){if(n.state===m.WAITING&&n.movable(e)||i&&h.movable(e)){var s=h.requestAutomove(e,n.curHint||Q);if(s){e.ownedBy,t.containers.Card.speed=o.automoveSpeed;var a=e.ownedBy.getCards(e.ownedBy.cards.length-e.ind),c=n.performMove(a,s);return h.clickAdjust(a),t.containers.Card.speed=o.animationSpeed,g=setTimeout(function(){r.drop.play()},c),oe(c),!0}}return!1},n.hoverable=function(t){return n.state===m.WAITING&&h.hoverable(t)},n.movable=function(t){return!t.moving&&!t.flipping&&h.movable(t)},n.instaWin=function(){h.tableaus.forEach(function(t){for(;t.cards.length;)t.popCard()});for(var t=0;t<h.foundations.length;t++)for(var e=0;13>e;e++)h.foundations[t].takeIn(h.cards[13*t+e]);n.testEnd()}}(),function(){"use strict";var e=t.config,i=t.ad={};if(e.isApp&&(e.isiOS&&e.isFreeApp&&$(document).on("deviceready",function(){var t=!0;window.addEventListener("orientationchange",window.plugins.iAdPlugin.orientationChanged,!1),document.addEventListener("iAdBannerViewDidLoadAdEvent",function(){window.plugins.iAdPlugin.showAd(!0)},!1),document.addEventListener("iAdBannerViewDidFailToReceiveAdWithErrorEvent",function(){window.plugins.iAdPlugin.showAd(!1)},!1),window.plugins.iAdPlugin.prepare(t),window.plugins.iAdPlugin.orientationChanged(!0),window.plugins.iAdPlugin.showAd(!0)}),"windows"==e.isApp)){var n=null,o=null;i.positionAd=function(i){e.isFreeApp&&(n||(n=$("#winAdContainer")),o&&(o=null,n.html("")),o=new MicrosoftNSJS.Advertising.AdControl(n[0],{applicationId:"002fb023-ada1-4580-bcb9-0368b062f7e0",adUnitId:i?"10048436":"10045561"}),o.isAutoRefreshEnabled=!0,o.onErrorOccurred=function(t,e){console&&console.log("Ad Error:",e.errorMessage)},i?($("#game-ui").css("height",""),$("#playArea").css("left",160),n.removeClass("portrait").addClass("landscape")):($("#game-ui").css("height","calc(100% - 90px)"),$("#playArea").css("left",0),n.removeClass("landscape").addClass("portrait")),t.game.scheduleUpdateDisplay(100))}}}(),t.winAppify=function(){"use strict";var e=t.config,i=function(){$(".ui-body-c, .ui-body-c input, .ui-body-c select, .ui-body-c textarea,.ui-body-c button, .ui-bar-a, .ui-bar-a input, .ui-bar-a select, .ui-bar-a textarea, .ui-bar-a button, .ui-btn-up-a, .ui-btn-hover-a, .ui-btn-down-a, .ui-btn-up-c, .ui-btn-hover-c, .ui-btn-down-c").css("font-family","Segoe UI"),$(document.body).addClass("win8"),$("#about-but").remove(),e.isFreeApp||($("#WinAdPortrait").remove(),$("#WinAdLandscape").remove()),$(window).resize(function(){var e=Windows.UI.ViewManagement.ApplicationView.value,i=Windows.UI.ViewManagement.ApplicationViewState.snapped;e===i?($("#winAdContainer, .bottomButton, #topBar").css("display","none"),$("#playArea").css("left","").css("height","100%")):($("#winAdContainer, .bottomButton, #topBar").css("display",""),t.ad.positionAd(window.innerHeight<window.innerWidth&&window.innerHeight<850))}),$(".bottomButton").addClass("winApp"),$(document).ready(function(){t.ready()}),t.ad.positionAd(window.innerHeight<window.innerWidth&&window.innerHeight<850)},n=WinJS.Application;n.onloaded=i,Windows.UI.WebUI.WebUIApplication.onsuspending=function(t){var e=t.suspendingOperation.getDeferral();saveGame(),e.complete()},WinJS.Binding.optimizeBindingReferences=!0;var o=Windows.ApplicationModel.Activation;n.onactivated=function(t){t.detail.kind===o.ActivationKind.launch&&(t.detail.previousExecutionState!==o.ApplicationExecutionState.terminated,t.setPromise(WinJS.UI.processAll()))};var s;s={popup:{title:"Read Privacy Policy",cmd:function(){window.open("http://www.treecardgames.com/privacy/app_win.htm")}}},Windows.UI.WebUI.WebUIApplication.addEventListener("resuming",function(){t.game.timer.start()},!1),WinJS.Application.onsettings=function(t){t.detail.applicationcommands={about:{title:"About",href:"/www/solitaire/html/win_app/about.html"}},WinJS.UI.SettingsFlyout.populateSettings(t);var e=Windows.UI.ApplicationSettings,i=t.detail.e.request.applicationCommands;for(var n in s){var o=s[n],a=new e.SettingsCommand(n,o.title,o.cmd);i.append(a)}},n.start(),window.alert=function(e){t.ui.gameAlert("Alert",e)},e.isDebugging&&(WinJS.Application.onerror=function(){return!0})},function(){"use strict";var i=t.config,n=t.resources,o=t.game,s=t.display,a=t.containers.Card=function(t){this.objid=t,this.flipping=!1,this.moving=!1,this.movingTimer=0,this.highlighted=!1,this.hasShadow=!1,this.hovereffect=!1,this.ind=-1,this.ownedBy=null,this.inHint=null,this.pos={},this.type=Math.floor(t%52/13),this.num=t%52-13*this.type+1,this.dom=document.createElement("div"),this.dom.className="card",this.dom.unselectable=!0,this.dom.onselectstart=function(){return!1},this.dom.style.position="absolute",this.dom.style.top=0,this.dom.style.left=0,this.jdom=$(this.dom),this.front=n.getCardImage(this.type,this.num),this.front.className="cardFront",this.front.style.position="absolute",this.front.style.display="block",this.front.draggable=!1,this.front.ondragstart=function(){return!1},this.dom.appendChild(this.front),this.back=n.getCardBackImage(),this.back.className="cardBack",this.back.style.position="absolute",this.back.style.display="block",this.back.draggable=!1,this.back.ondragstart=function(){return!1},this.dom.appendChild(this.back),$(this.front).add(this.back).css({scaleX:1,scaleY:1}),this.flipped=!0;var e=this;this.jdom.on(i.event_touchstart,function(t){if(t=t.originalEvent,!t.changedTouches&&!t.isPrimary)return!1;if(t.button)return!1;var i=t.changedTouches?t.changedTouches[0]:t;return o.initialiseDrag(e,{x:i.clientX,y:i.clientY},!0),!1}).on("mousedown",function(t){3!==t.which&&o.initialiseDrag(e,{x:t.clientX,y:t.clientY})}).dblclick(function(){o.requestAutomove(e)}).on("contextmenu",function(t){t.preventDefault(),o.requestAutomove(e)}),this.setHoverEffect(!0),this.flipTimer=0,this.hoverred=!1};a.speed=i.animationSpeed,a.prototype.setHoverred=function(t){this.hovered=t,t?this.moving||this.flipping||!o.hoverable(this)||(this.jdom.css({"box-shadow":s.hoverShadow}),this.inHint&&(this.inHint.style.display="none")):(this.highlighted?this.jdom.css({"box-shadow":s.highlightShadow,ieBoxShadow:s.highlightShadow}):this.jdom.css({"box-shadow":""}),this.inHint&&(this.inHint.style.display=""))},a.prototype.setHoverEffect=function(t){if(this.hovereffect!==t)if(this.hovereffect=t,t&&!i.isiOS){var e=this;this.jdom.hover(function(){e.setHoverred(!0)},function(){e.setHoverred(!1)})}else this.jdom.off("hover")},a.prototype.setShadow=function(t){this.hasShadow=t,this.animating||this.updateShadow()},a.prototype.updateShadow=function(){var t=$(this.back).add(this.front);this.hasShadow?t.css({boxShadow:s.cardStaticShadow}):t.css({boxShadow:""})},a.prototype.setHighlight=function(t){t?(this.jdom.transition({"box-shadow":s.highlightShadow,ieBoxShadow:s.highlightShadow},200),this.highlighted=!0):(this.highlighted=!1,this.jdom.transition({"box-shadow":"",ieBoxShadow:""},200))},a.prototype.flip=function(t,e,n){if(this.flipped!==t||n){this.flipped=t,this.ownedBy&&this.ownedBy.postFlip(this),this.flipping=!0;var s=$(".wrap-shadow")[0];e=e?Math.floor(e/2):this.animating?i.animation_time/4:i.flipTime/2;var a,r;t?(a=$(this.back),r=$(this.front)):(a=$(this.front),r=$(this.back)),this.jdom.css("box-shadow",""),r.transition({scaleX:0,scaleY:o.getFlipScale()},e),a.css({scaleX:0,scaleY:o.getFlipScale()}),clearTimeout(this.flipTimer),this.flipTimer=setTimeout(function(){a.transition({scaleX:1,scaleY:1},e,function(){this.flipping=!1,this.setHoverred(this.hoverred),$.browser.mozilla&&(s.style.visibility="hidden",setTimeout(function(){s.style.visibility=""},50))}.bind(this))}.bind(this),e+10)}},a.prototype.directFlip=function(t){if(this.flipped!==t){this.flipped=t,this.ownedBy&&this.ownedBy.postFlip(this);var e,i;clearTimeout(this.flipTimer),t?(e=$(this.back),i=$(this.front)):(e=$(this.front),i=$(this.back)),e.css({webkitTransition:""}),e.css({webkitTransition:""}),setTimeout(function(){i.css({display:"block",scaleX:0,scaleY:o.getFlipScale()}),e.css({display:"block",scaleX:1,scaleY:1})},0)}},a.prototype.parabol=function(){this.front.style[e.prefix+"Transform"]="",setTimeout(function(){var t=this.time/4,i=this.time-t+300,n=Math.floor(1*this.dy),o=this.dx<0?-1:1;this.front.style[e.prefix+"Transition"]=t+"ms cubic-bezier(0.000, 0.300, 0.700, 1.000)",this.front.style[e.prefix+"Transform"]="translateY(-"+n+"px) rotate("+180*o+"deg)",setTimeout(function(){this.front.style[e.prefix+"Transition"]=i+"ms cubic-bezier(0.100, 0.000, 0.70, 1.200)",this.front.style[e.prefix+"Transform"]="translateY(0px) rotate("+180*o+"deg)",setTimeout(function(){this.front.style[e.prefix+"Transition"]="",this.front.style[e.prefix+"Transform"]=""}.bind(this),i+10)}.bind(this),t)}.bind(this),10)},a.prototype.adjustPos=function(t,e){if(this.ownedBy){var n=this.pos=this.ownedBy.getPosForChild(this.ind),o=parseInt(this.jdom.css("x"),10),s=parseInt(this.jdom.css("y"),10);if(o===n.x>>0&&s===n.y>>0&&!this.moving&&!this.animating)return this.jdom.css("zIndex",n.z),void 0;this.time=t||this.animating?this.animating?i.animation_time:t:~~Math.max(i.minimum_moving_time,1e3*Math.sqrt(Math.pow(n.y-s,2)+Math.pow(n.x-o,2))/a.speed),this.dy=n.y-s,this.dx=n.x-o,void 0===e&&(e=100),clearTimeout(this.movingTimer),this.moving=!0;var r=this;this.movingTimer=setTimeout(function(){r.moving=!1,r.setHoverred(r.hoverred)},this.time),this.animating?this.jdom.stop(!0).css("zIndex",n.z).transition({y:n.y>>0,x:n.x>>0},this.time,i.easingFunc):this.jdom.stop(!0).css("zIndex",n.z+e).transition({y:n.y>>0,x:n.x>>0,delay:10},this.time,i.easingFunc)}}}(),function(){"use strict";var e=t.display,i=t.containers.Container=function(t,e){this.cards=[],this.objid=t,this.offsetTop=0,this.offsetLeft=0,e?(this.dom=e,this.dom.style.position="absolute",this.dom.ondragstart=function(){return!1}):this.dom=null,this.highlighted=!1};i.prototype.ini=function(){this.cards.length=0},i.prototype.maxCardOut=function(){return this.cards.length?1:0},i.prototype.shouldFlipLast=function(){return!1},i.prototype.flipUpdate=function(){},i.prototype.maxCardIn=function(){return 1},i.prototype.postFlip=function(){},i.prototype.toRect=function(){return{left:this.offsetLeft,right:this.offsetLeft+e.cwidth,top:this.offsetTop,bottom:this.offsetTop+e.cheight}},i.prototype.ini=function(){this.cards.length=0},i.prototype.accept=function(){return!1},i.prototype.lastCard=function(){return this.cards.length>0?this.cards[this.cards.length-1]:null},i.prototype.getCards=function(t){return this.cards.slice(this.cards.length-t,this.cards.length)},i.prototype.popCard=function(){this.cards.pop().ownedBy=null},i.prototype.getPosForChild=function(t){return{x:this.offsetLeft,y:this.offsetTop,z:t+this.zAdd}},i.prototype.setPos=function(t,e){this.offsetLeft=t,this.offsetTop=e},i.prototype.adjustPos=function(){this.dom&&$(this.dom).css({y:this.offsetTop,x:this.offsetLeft});var t=0;return this.cards.forEach(function(e){e.adjustPos(),t=Math.max(t,e.time)}),t++,this.adjustZ(t),t-1},i.prototype.adjustZ=function(t){setTimeout(function(){this.cards.forEach(function(t){t.moving||t.jdom.stop(!0).css("zIndex",t.pos.z)})}.bind(this),t)},i.prototype.setHighlight=function(t){t?this.cards.length?this.lastCard().setHighlight(!0):(this.dom&&$(this.dom).transition({"box-shadow":e.highlightShadow,ieBoxShadow:e.highlightShadow},200),this.highlighted=!0):this.cards.length?this.lastCard().setHighlight(!1):(this.dom&&$(this.dom).transition({"box-shadow":"",ieBoxShadow:""},200),this.highlighted=!1)}}(),function(){"use strict";t.display,t.game;var e=t.containers.Foundation=function(e){var i=t.resources.getFoundationImage();i.className="foundation",t.containers.Container.call(this,e,i),this.zAdd=7},i="normal";e.setMode=function(t){i=t},e.prototype=Object.create(t.containers.Container.prototype),e.prototype.accept=function(t){if("noManual"===i)return!1;if(t instanceof Array){if(t.length>1)return!1;t=t[0]}return"onlyKing"===i?13===t.num:this.cards.length?t.type===this.lastCard().type&&1===t.num-this.lastCard().num:1===t.num},e.prototype.takeIn=function(t){t instanceof Array||(t=[t]),this.lastCard()&&this.lastCard().setShadow(!1),t.forEach(function(t){t.ownedBy=this,t.setShadow(!1),t.ind=this.cards.length,this.cards.push(t)}.bind(this)),this.lastCard().setShadow(!0)},e.prototype.maxCardOut=function(){return"normal"===i?1:0},e.prototype.popCard=function(){t.containers.Container.prototype.popCard.call(this),this.lastCard()&&this.lastCard().setShadow(!0)}}(),function(){"use strict";var e=t.display,i=(t.game,t.containers.Container.prototype),n=t.containers.Waste=function(e){t.containers.Container.call(this,e),this.offsetLeft=0,this.offsetTop=0,this.zAdd=1,this.highlightLen=0,this._layout="normal",this.popNeedUpdate=!1};n.prototype=Object.create(i),n.prototype.setLayout=function(t){this._layout=t,this.popNeedUpdate="3"===t?!0:!1},n.prototype.maxCardOut=function(){return this.cards.length>0?1:0},n.prototype.maxCardIn=function(){return 0},n.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,t.setShadow(!1),t.ind=this.cards.length,this.cards.push(t)}.bind(this)),"3"==this._layout&&(this.getCards(Math.min(this.cards.length,6)).forEach(function(t){t.setShadow(!1)}),this.getCards(Math.min(this.cards.length,3)).forEach(function(t){t.setShadow(!0)}))},n.prototype.getPosForChild=function(t){return{normal:function(t){return{x:this.offsetLeft-Math.floor(t/2),y:this.offsetTop-Math.floor(t/2),z:t+this.zAdd}},3:function(t){if(this.cards.length<3)return{x:this.offsetLeft+t*e.cardSep,y:this.offsetTop,z:t+this.zAdd};var i=t-this.cards.length+3;return{x:this.offsetLeft+Math.max(i,0)*e.cardSep,y:this.offsetTop,z:(0>i?0:i+2)+this.zAdd}}}[this._layout].bind(this)(t)}}(),function(){"use strict";t.display,t.game;var e=t.containers.CardHolder=function(e){t.containers.Container.call(this,e),this.offsetTop=0,this.offsetLeft=0,this.zAdd=0,this.blockingContainers=[]};e.prototype=Object.create(t.containers.Container.prototype),e.prototype.addBlockingContainer=function(t){this.blockingContainers.push(t)},e.prototype.takeIn=function(t){t instanceof Array&&(t=t[0]),t.ownedBy=this,t.ind=0,this.cards.push(t),t.setShadow(!0)},e.prototype.isBlocked=function(){return this.blockingContainers.some(function(t){return 0!==t.cards.length})},e.prototype.maxCardOut=function(){return this.isBlocked()?0:this.cards.length},e.prototype.accept=function(){return!1}}(),function(){"use strict";t.display,t.game;var e=t.containers.Reserve=function(e){var i=t.resources.getReserveImage();i.className="cell",t.containers.Container.call(this,e,i),this.offsetTop=0,this.offsetLeft=0,this.zAdd=99};e.prototype=Object.create(t.containers.Container.prototype),e.prototype.accept=function(t){return this.cards.length?!1:t instanceof Array?1===t.length:!0},e.prototype.takeIn=function(t){t instanceof Array&&(t=t[0]),t.ownedBy=this,t.ind=0,this.cards.push(t),t.setShadow(!0)}}(),function(){"use strict";var e,i,n,o,s=t.display,a=t.game,r=t.containers.Container.prototype,c=t.containers.Tableau=function(e){var i=t.resources.getTableauImage();i.className="tableau-holder",t.containers.Container.call(this,e,i),this._maxcard=0,this.cardSep=t.display.cardSep,this.fcardcount=0,this.offsetLeft=0,this.offsetTop=0,this.zAdd=7,this.highlightLen=0};c.setMovableCards=function(t){i=t,e={single:function(){return!1},any:function(){return!0},sequence_any:function(t,e){return!t.flipped&&!e.flipped&&1===t.num-e.num},sequence_same_suit:function(t,e){return!t.flipped&&!e.flipped&&1===t.num-e.num&&t.type===e.type},sequence_diff_color:function(t,e){return!t.flipped&&!e.flipped&&1===t.num-e.num&&1===(t.type-e.type+4)%2}}[t]},c.setSpaceAccept=function(t){n=t},c.setWithCardAccept=function(t){o=t},c.prototype=Object.create(r),c.prototype.maxCardOut=function(){return this._maxcard},c.prototype.maxCardIn=function(){return 1/0},c.prototype.ini=function(){this.cards.length=0,this.cardSep=s.cardSep,this.fcardcount=0,this._maxcard=0,r.ini.call(this)},c.prototype.toRect=function(){return{left:this.offsetLeft,top:this.offsetTop,right:this.offsetLeft+s.cwidth,bottom:1/0}},c.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,t.ind=this.cards.length,this.cards.push(t),t.setShadow(!0)}.bind(this)),this.computeMaxCardOut()},c.prototype.computeMaxCardOut=function(){0===this.cards.length&&(this._maxcard=0);for(var t=this.cards.length-1;t>0&&e(this.cards[t-1],this.cards[t]);)t--;this._maxcard=this.cards.length-t},c.prototype.adjustSep=function(){if(this.cards.length<=1)return!1;var t=0;for(this.fcardcount=0;t<this.cards.length&&this.cards[t].flipped;)this.fcardcount++,t++;var e=this.cardSep;return this.cardSep=Math.floor((s.playAreaHeight-this.offsetTop-1.2*s.cheight)/(this.cards.length-1-this.fcardcount+this.fcardcount/2)),this.cardSep>s.cardSep&&(this.cardSep=s.cardSep),e!==this.cardSep?!0:!1},c.prototype.popCard=function(){this.lastCard().flipped&&this.fcardcount--,this.cards.pop().ownedBy=null,this.computeMaxCardOut(),this.adjustSep()&&this.cards.forEach(function(t){t.adjustPos(!1,0)})},c.prototype.shouldFlipLast=function(){return!0},c.prototype.flipUpdate=function(){this.computeMaxCardOut(),this.adjustSep()&&this.cards.forEach(function(t){t.adjustPos(!1,0)})},c.prototype.accept=function(t){return t instanceof Array||(t=[t]),0===t.length?!1:this===t[0].ownedBy?!1:this.cards.length?"groupable"===o?e(this.cards[this.cards.length-1],t[0]):"sequence"===o?1===this.cards[this.cards.length-1].num-t[0].num:"any"===o?!0:"suit"===o?1===this.cards[this.cards.length-1].num-t[0].num&&this.lastCard().type===t[0].type:!1:a.getMaxmove(this)<t.length?!1:"king"===n?13===t[0].num:"any"===n?!0:!1},c.prototype.adjustPos=function(){return this.cardSep=s.cardSep,this.adjustSep(),r.adjustPos.call(this)},c.prototype.getPosForChild=function(t){var e;return e=t<this.fcardcount?t*this.cardSep/2:this.fcardcount*this.cardSep/2+(t-this.fcardcount)*this.cardSep,{x:this.offsetLeft,y:e+this.offsetTop,z:t+this.zAdd}},c.prototype.setHighlight=function(t,e){t&&(1===e||!e)||1===this.highlightLen&&!t?(this.highlightLen=1,r.setHighlight.call(this,t)):t?(this.highlightLen=e,a.requestLongHint(this.cards[this.cards.length-e],this.lastCard())):(this.highlightLen=0,a.removeLongHint(this.cards[this.cards.length-e],this.lastCard()))}}(),function(){"use strict";var e=t.display,i=t.game,n=t.resources,o=t.containers.Container.prototype,s=t.containers.Stock=function(i){var o=document.createElement("div");if(o.className="waste-holder",this.stopImage=$(n.getStopSpotImage()),this.redealImage=$(n.getRedealImage()),this.stopImage.add(this.redealImage).css({position:"absolute","z-index":1,top:0,left:0,width:"100%",height:"100%"}),$(o).append(this.stopImage).on("click",function(){this.redeal()}.bind(this)),t.containers.Container.call(this,i,o),this.offsetLeft=0,this.offsetTop=0,this.zAdd=7,this.disabled=!0,this._redealCount=1/0,!t.config.isiOS){var s=$(o);s.hover(function(){this.cards.length||this.disabled||s.css({"box-shadow":e.hoverShadow})}.bind(this),function(){this.highlighted?s.css({"box-shadow":e.highlightShadow,ieBoxShadow:e.highlightShadow}):s.css({"box-shadow":""})}.bind(this))}this.target=null,this.ejectCards=1,this.type="normal",this.layoutOptions={},this.lastCardUp=!1},a=null;s.setEmptyCheck=function(t){a=t},s.prototype=Object.create(o),s.prototype.setLayout=function(t,e){this.type=t,this.layoutOptions=e},s.prototype.shouldFlipLast=function(){return this.lastCardUp},s.prototype.getPosForChild=function(t){return"normal"==this.type?{x:this.offsetLeft-Math.floor(t/2),y:this.offsetTop-Math.floor(t/2),z:t+this.zAdd}:"piles"==this.type?{x:this.offsetLeft+this.layoutOptions.margin*Math.floor(t/this.layoutOptions.numPerPile),y:this.offsetTop,z:t+this.zAdd}:void 0},s.prototype.disable=function(){this.disabled||(this.redealImage.remove(),$(this.dom).append(this.stopImage),this.disabled=!0)},s.prototype.redealable=function(){return 0===this.cards.length&&!this.disabled&&0!==this.target.cards.length},s.prototype.enable=function(){this.disabled&&(this.stopImage.remove(),$(this.dom).append(this.redealImage),this.disabled=!1)},s.prototype.redeal=function(){return this.disabled||this.cards.length>0||this.target instanceof Array||0===this.target.cards.length?!1:i.requestTakeOver(this,this.target,!0)?(this.setRedealCount(this._redealCount-1),$(this.dom).trigger("mouseout"),!0):!1},s.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,t.ind=this.cards.length,"normal"==this.type?t.setShadow(!1):"piles"==this.type&&t.setShadow(0===t.ind%this.layoutOptions.numPerPile),this.cards.push(t)}.bind(this))},s.prototype.setRedealCount=function(t){this._redealCount=t,t>0?this.enable():this.disable()},s.prototype.increRedealCount=function(){this.setRedealCount(this._redealCount+1)},s.prototype.decreRedealCount=function(){this.setRedealCount(this._redealCount-1)},s.prototype.eject=function(){if(this.target instanceof Array){if(a&&this.target.some(function(t){return 0===t.cards.length}))return a(),0;for(var t=[],e=0;e<this.target.length&&e<this.cards.length;e++)t.push(this.target[e]);return i.performMove(this.getCards(t.length).reverse().map(function(t){return[t]}),t,void 0,{flipCards:!this.lastCardUp})}return i.performMove(this.getCards(Math.min(this.cards.length,this.ejectCards)),this.target,void 0,{flipCards:!this.lastCardUp,reversed:!0})}}(),function(){"use strict";var e={tableaus:[],reserves:[],foundations:[],stocks:[],wastes:[],cards:[],cardHolders:[]},i=function(t,e,i,n,o){var s;if(t){if(o.length<t.length)for(s=o.length;s<t.length;s++)o.push(new e(s));for(s=0;s<t.length;s++)o[s].dom&&n.appendChild(o[s].dom),i.push(o[s]);return o.slice(0,t.length)}return null},n=function(e,i,n){var o;if(n.length<e)for(o=n.length;e>o;o++)n.push(new t.containers.Card(o));for(o=0;e>o;o++)i.appendChild(n[o].dom),n[o].jdom.css({x:-2e3,y:-2e3});return n.slice(0,e)},o=function(t,e,i,n){e&&e.forEach(function(e,o){for(var s=0;e>s;s++){var a=Math.floor(Math.random()*t.length);
i[o].takeIn(n[t[a]]),a+1<t.length?t[a]=t.pop():t.pop()}})},s=t.config.totalL,a=t.config.cL,r=t.cardData,c=4,h=t.GameBase=function(){this.containers=[],this.frag=document.createDocumentFragment(),this.reserves=i(this.config.reserves,t.containers.Reserve,this.containers,this.frag,e.reserves),this.foundations=i(this.config.foundations,t.containers.Foundation,this.containers,this.frag,e.foundations),this.stocks=i(this.config.stocks,t.containers.Stock,this.containers,this.frag,e.stocks),this.wastes=i(this.config.wastes,t.containers.Waste,this.containers,this.frag,e.wastes),this.tableaus=i(this.config.tableaus,t.containers.Tableau,this.containers,this.frag,e.tableaus),this.cardHolders=i(this.config.cardHolders,t.containers.CardHolder,this.containers,this.frag,e.cardHolders),this.cards=n(this.config.cards,this.frag,e.cards),this.initx=0,this.inity=0,this.maxMove=1/0,this.config.suits?this.setSuits(this.config.suits):this.setSuits(4),t.gameSettings.autoplayMode="enabled",this.autoMoveFollowHint=!0};h.prototype.flipScale=t.config.flipScale,h.prototype.setSuits=function(e){c!==e&&(c=e,t.resources.changeCardImagesToSuits(e),this.cards.forEach(function(t){t.type=t.objid%e}))},h.prototype.setUpCardData=function(t){r.setName(t)},h.prototype.moveOccurred=function(e,i,n){e instanceof t.containers.Foundation&&(r.gameScore-=5*n),i instanceof t.containers.Foundation&&(r.gameScore+=5*n),this.updateState()},h.prototype.updateState=function(){},h.prototype.undoTakeOver=function(e,i){i instanceof t.containers.Stock&&e===i.target?i.increRedealCount():e instanceof t.containers.Stock&&i===e.target&&e.decreRedealCount()},h.prototype.hoverable=function(t){return this.movable(t)},h.prototype.getMaxmove=function(){return 1/0},h.prototype.movable=function(t){return!t.flipped&&t.ownedBy.cards.length-t.ind<=t.ownedBy.maxCardOut()&&t.ownedBy.cards.length-t.ind<=this.maxMove},h.prototype.cardClicked=function(e){return e.ownedBy instanceof t.containers.Stock&&e==e.ownedBy.lastCard()?e.ownedBy.eject():0},h.prototype.requestAutomove=function(t,e){if(this.autoMoveFollowHint&&e&&e.from&&e.to&&e.from===t.ownedBy&&t.ind===e.from.cards.length-e.length)return e.to;for(var i=t.ownedBy.getCards(t.ownedBy.cards.length-t.ind),n=0;n<this.automovePrefs.length;n++)for(var o=0;o<this.automovePrefs[n].length;o++)if(this.testAccept(i,this.automovePrefs[n][o]))return this.automovePrefs[n][o];return null},h.prototype.adjustLayout=function(e,i){var n=t.config.isMobilePhone?1.5:1,o=e/(s*this.columns+1)*s,r=Math.min(146,Math.floor(o/s*a)),c=Math.min(198,Math.floor(i/this.rows/n));198*(r/146)>c?r=Math.floor(146*(c/198)):c=Math.floor(198*(r/146)),o=Math.round(r/a*s);var h=Math.round(10*(c/8)),u=Math.min(r/s,Math.floor((o-r)/2)),d=Math.floor((e-o*this.columns)/2);return{cwidth:r,cheight:c,top:h,margin:u,left:d,height:i,width:e}},h.prototype.init=function(t){if($(".card").transition({x:this.initx,y:this.inity,boxShadow:"none"}).find(".cardFront").css("boxShadow","none"),this.containers.forEach(function(t){t.ini()}),void 0!==this.config.stockRedealCount&&this.stocks){var e=this.config.stockRedealCount;this.stocks.forEach(function(t){t.setRedealCount(e)})}var i="all"!==this.config.flip;this.cards.forEach(function(t){t.animating=!0,t.directFlip(i),t.setShadow(!1),t.updateShadow()}),setTimeout(function(){for(var e=[],i=0;i<this.config.cards;i++)e.push(i);if(["tableaus","foundations","reserves","stocks","wastes","cardHolders"].forEach(function(t){o(e,this.config[t],this[t],this.cards)}.bind(this)),this.config.flip instanceof Object)if("last"===this.config.flip.type){var n=this.config.flip.num;this.config.flip.containers.forEach(function(t){this[t].forEach(function(t){t.getCards(n).forEach(function(t){t.directFlip(!1)})})}.bind(this))}else if("all"===this.config.flip.type)this.config.flip.containers.forEach(function(t){this[t].forEach(function(t){t.cards.forEach(function(t){t.directFlip(!1)})})}.bind(this));else{var s=this.config.flip.nums;this.tableaus.forEach(function(t,e){t.getCards(s[e]).forEach(function(t){t.directFlip(!1)})})}if(this.containers.forEach(function(t){t.adjustPos()}),setTimeout(function(){this.cards.forEach(function(t){t.animating=!1,t.updateShadow()})}.bind(this),500),e.length>0)throw"there are "+e.length+" unused cards!";t&&t()}.bind(this),700)},h.prototype.getAutoFillMove=function(){if("n"===t.gameSettings.autoplayMode||"disabled"===t.gameSettings.autoplayMode)return null;var e=1/0;"g"!==t.gameSettings.autoplayMode&&(e=this.foundations.reduce(function(t,e){return Math.min(t,e.cards.length)},0)+3);for(var i=0;i<this.containers.length;i++)if(!(this.containers[i]instanceof t.containers.Foundation))for(var n=0;n<this.foundations.length;n++){var o=this.containers[i].lastCard();if(o&&!o.flipped&&this.containers[i].maxCardOut()>0&&o.num<e&&this.foundations[n].accept(o))return{cards:[o],destination:this.foundations[n]}}return null},h.prototype.testAccept=function(t,e){return e.accept(t)},h.prototype.clear=function(){this.containers.forEach(function(t){t.dom&&t.dom.parentNode.removeChild(t.dom),t.ini()}),this.cards.forEach(function(t){t.dom.parentNode.removeChild(t.dom)})},h.prototype.considerHints=function(){return!0},h.prototype.computeHints=function(t){this.containers.forEach(function(e){this.containers.forEach(function(i){if(e!=i&&0!==e.cards.length&&this.considerHints(e,i))for(var n=Math.min(Math.min(e.maxCardOut(),i.maxCardIn()),this.getMaxmove(i)),o=0;n>o;o++){var s=e.cards[e.cards.length-1-o];this.movable(s)&&this.testAccept([s],i)&&this.considerHints(e,i,o+1)&&t.push({from:e,to:i,length:o+1})}}.bind(this))}.bind(this))},h.prototype.isWon=function(){return this.foundations.every(function(t){return 13===t.cards.length})},h.prototype.isLost=function(t){return 0===t.length},h.prototype.gameState=function(){var t={containers:this.containers.map(function(t){return t.cards.map(function(t){return t.objid})}),flipInfo:this.cards.map(function(t){return t.flipped})};return this.stocks&&(t.stockRedeals=this.stocks.map(function(t){return""+t._redealCount})),t},h.prototype.loadGameState=function(e,i){var n=e.containers,o=this.cards;this.cards.forEach(function(t,i){t.directFlip(e.flipInfo[i])}),setTimeout(function(){this.containers.forEach(function(e,i){e.ini(),n[i].forEach(function(t){e.takeIn(o[t])}),e instanceof t.containers.Foundation&&(r.gameScore+=5*n[i].length),e.adjustPos()}),e.stockRedeals&&this.stocks.forEach(function(t,i){t.setRedealCount(parseFloat(e.stockRedeals[i]))}),this.cards.forEach(function(t){t.updateShadow(),t.animating=!1}),i()}.bind(this),100)},h.prototype.getSpecialHint=function(){return null},h.prototype.clickAdjust=function(){},h.prototype.getMoveWhenDrop=function(t,e){return[{cards:t,des:e}]}}(),function(){"use strict";var e=t.GameBase.prototype,i=t.games.Golf=function(e){var i="golf";"golf"!==e&&(i+="."+e),this.setUpCardData(i);var n=t.containers.Tableau;this.config={cards:52,flip:{type:"all",containers:["tableaus","foundations"]},tableaus:[5,5,5,5,5,5,5],foundations:[1],stocks:[16],stockRedealCount:0},n.setWithCardAccept("none"),n.setMovableCards("single"),n.setSpaceAccept("none"),t.containers.Foundation.setMode("normal"),t.containers.Stock.setEmptyCheck(null),this.columns=this.config.tableaus.length,this.rows=3.75,t.GameBase.call(this),this.automovePrefs=[this.foundations],this.stocks[0].setLayout("normal"),this.stocks[0].lastCardUp=!1,this.stocks[0].target=this.foundations[0],this.stocks[0].ejectCards=1,t.gameSettings.autoplayMode="disabled",this.aceToKing="golfeasy"===e};i.prototype=Object.create(e),i.prototype.hoverable=function(i){return e.hoverable.call(this,i)||i.ownedBy instanceof t.containers.Stock&&i===i.ownedBy.lastCard()},i.prototype.getSpecialHint=function(){return this.stocks[0].cards.length>0||this.stocks[0].redealable()?{to:this.stocks[0]}:null},i.prototype.adjustLayout=function(t,i){var n=e.adjustLayout.call(this,t,i);return n.top=Math.floor(n.cheight/4),this.initx=Math.floor(n.width/2-1.25*n.cwidth),this.inity=Math.floor(2.45*n.cheight+n.top),this.tableaus.forEach(function(t,e){t.setPos(n.margin+n.left+(2*n.margin+n.cwidth)*e,n.top)}),this.foundations[0].setPos(Math.floor(n.width/2+.25*n.cwidth),Math.floor(2.45*n.cheight+n.top)),this.stocks[0].setPos(Math.floor(n.width/2-1.25*n.cwidth),Math.floor(2.45*n.cheight+n.top)),n},i.prototype.isLost=function(t){return 0===t.length&&0===this.stocks[0].cards.length},i.prototype.clickAdjust=function(t){t.forEach(function(t){t.parabol()})},i.prototype.testAccept=function(e,i){if(e instanceof Array||(e=[e]),i instanceof t.containers.Foundation){var n=e[0];if(n.flipped)return!1;var o=i.lastCard().num;return 1===o?2===n.num||this.aceToKing&&13===n.num:13==o?12===n.num||this.aceToKing&&1===n.num:1===Math.abs(o-n.num)}return i.accept(e)},i.prototype.isWon=function(){return this.foundations[0].cards.length===52-this.stocks[0].cards.length}}(),function(){"use strict";var e=null,i=t.games.Freecell=function(i){this.setUpCardData("freecell."+i);var n=t.containers.Tableau;this.config={cards:52,flip:"all",tableaus:[7,7,7,7,6,6,6,6],reserves:[0,0,0,0],foundations:[0,0,0,0]},n.setWithCardAccept("groupable"),t.containers.Foundation.setMode("normal"),this.canUseTableau=!0,this.columns=8,this.rows=3;var o=function(t){this.initx=t.left+t.margin,this.inity=t.cheight/8,this.tableaus.forEach(function(e,i){e.setPos(t.margin+t.left+(2*t.margin+t.cwidth)*i,t.top)}),this.reserves.forEach(function(e,i){e.setPos(Math.floor(t.left+(t.cwidth+3*(t.margin/2))*i+t.margin),Math.floor(t.cheight/8))}),this.foundations.forEach(function(e,i){e.setPos(Math.floor(t.width-t.left-(t.cwidth+3*(t.margin/2))*(4-i)),Math.floor(t.cheight/8))})}.bind(this),s=function(t){this.initx=t.left+t.margin,this.inity=t.cheight/8;var e=Math.floor(((t.height-30)/5-t.cheight)/2);e<t.cheight/16?e=Math.floor(t.cheight/16):e>t.cheight/6&&(e=Math.floor(t.cheight/6)),this.tableaus.forEach(function(e,i){e.setPos(t.margin+t.left+(2*t.margin+t.cwidth)*(i+1),t.top)}),this.reserves.forEach(function(e,i){e.setPos(t.left+(t.cwidth+2*t.margin)*(i+1)+t.margin,Math.floor(t.cheight/8))}),this.foundations.forEach(function(i,n){i.setPos(t.left+t.margin,Math.floor(t.cheight/8+(t.cheight+2*e)*n))})}.bind(this),a=function(t){this.initx=t.left+t.margin,this.inity=t.cheight/8,this.tableaus.forEach(function(e,i){e.setPos(t.margin+t.left+(2*t.margin+t.cwidth)*i,Math.floor(2.25*t.cheight))}),this.reserves.forEach(function(e,i){e.setPos(t.left+(t.cwidth+3*t.margin)*(i%4)+t.margin,Math.floor(t.cheight/8+1.05*Math.floor(i/4)*t.cheight))}),this.foundations.forEach(function(e,i){e.setPos(t.width-t.left+t.margin-(t.cwidth+3*t.margin)*(4-i%4),Math.floor(t.cheight/8+1.05*Math.floor(i/4)*t.cheight))})}.bind(this);"freecell"==i?(n.setSpaceAccept("any"),n.setMovableCards("sequence_diff_color"),e=o):"eightoff"==i?(n.setMovableCards("sequence_same_suit"),n.setSpaceAccept("king"),this.config.reserves=[1,1,1,1,0,0,0,0],this.config.tableaus=[6,6,6,6,6,6,6,6],e=s,this.columns=9,this.rows=4.75):"bakersgame"==i?(n.setMovableCards("sequence_same_suit"),n.setSpaceAccept("king"),this.canUseTableau=!1,e=o):"twodecks"==i&&(this.config.cards=[104],n.setMovableCards("sequence_diff_color"),n.setSpaceAccept("any"),this.config.reserves=[0,0,0,0,0,0,0,0],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.tableaus=[11,11,11,11,10,10,10,10,10,10],e=a,this.rows=5.5,this.columns=10),t.GameBase.call(this),this.emptyTableaus=0,this.emptyReserves=0,this.maxMove=5,this.emptyMaxmove=5,this.automovePrefs=[this.foundations,this.tableaus,this.reserves]},n=t.GameBase.prototype;i.prototype=Object.create(n),i.prototype.init=function(t){this.maxMove=this.emptyReserves+1,this.emptyMaxmove=this.maxMove,n.init.call(this,function(){this.emptyTableaus=0,this.emptyReserves=this.reserves.reduce(function(t,e){return t+(e.cards.length?0:1)},0),t()}.bind(this))},i.prototype.adjustLayout=function(t,i){var o=n.adjustLayout.call(this,t,i);return e(o),o},i.prototype.considerHints=function(e,i){return e instanceof t.containers.Foundation?!1:i instanceof t.containers.Reserve?!1:!0},i.prototype.updateState=function(){this.emptyReserves=this.reserves.reduce(function(t,e){return t+(e.cards.length?0:1)},0),this.emptyTableaus=this.tableaus.reduce(function(t,e){return t+(e.cards.length?0:1)},0),this.maxMove=this.canUseTableau?(this.emptyTableaus*(this.emptyTableaus+1)/2+1)*(this.emptyReserves+1):this.emptyReserves+1,this.emptyMaxmove=this.canUseTableau?(this.emptyTableaus*(this.emptyTableaus-1)/2+1)*(this.emptyReserves+1):this.maxMove},i.prototype.getMaxmove=function(e){return e instanceof t.containers.Tableau&&0===e.cards.length?this.emptyMaxmove:this.maxMove},i.prototype.isLost=function(t){return 0===t.length&&0===this.emptyTableaus&&0===this.emptyReserves},i.prototype.loadGameState=function(e,i){t.GameBase.prototype.loadGameState.call(this,e,function(){this.updateState(),i()}.bind(this))}}(),function(){"use strict";var e=t.GameBase.prototype,i=t.games.Klondike=function(e){this.setUpCardData("Klondike."+e);var i=t.containers.Tableau;this.config={cards:52,flip:{type:"last",num:1,containers:["tableaus"]},tableaus:[1,2,3,4,5,6,7],foundations:[0,0,0,0],wastes:[0],stocks:[24],stockRedealCount:1/0},i.setWithCardAccept("groupable"),i.setMovableCards("sequence_diff_color"),i.setSpaceAccept("king"),t.containers.Foundation.setMode("normal"),t.containers.Stock.setEmptyCheck(null);var n=1,o="normal";"3"===e?(n=3,o="3"):"twodecks"===e?(this.config.cards=104,this.config.tableaus=[1,2,3,4,5,6,7,8,9],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.stocks[0]=59):"easthaven"===e?(i.setSpaceAccept("any"),this.config.tableaus=[3,3,3,3,3,3,3],this.config.stocks[0]=31,this.config.wastes.length=0,this.config.stockRedealCount=0):"fortythieves"===e&&(this.config.cards=104,this.config.tableaus=[4,4,4,4,4,4,4,4,4,4],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.stocks[0]=64,i.setMovableCards("single"),i.setSpaceAccept("any"),i.setWithCardAccept("suit"),this.config.flip.num=4,this.config.stockRedealCount=0),this.columns=this.config.tableaus.length,this.rows=3,t.GameBase.call(this),this.automovePrefs=[this.foundations,this.tableaus],this.stocks[0].setLayout("normal"),this.stocks[0].lastCardUp=!1,"fortythieves"===e?(this.stocks[0].target=this.wastes[0],this.stocks[0].ejectCards=n,this.wastes[0].setLayout(o)):"easthaven"===e?(this.stocks[0].target=this.tableaus,this.stocks[0].ejectCards=n):(this.stocks[0].target=this.wastes[0],this.stocks[0].ejectCards=n,this.wastes[0].setLayout(o))};i.prototype=Object.create(e),i.prototype.hoverable=function(i){return e.hoverable.call(this,i)||i.ownedBy instanceof t.containers.Stock&&i===i.ownedBy.lastCard()},i.prototype.considerHints=function(e,i,n){return e instanceof t.containers.Foundation?!1:n&&e instanceof t.containers.Tableau&&i instanceof t.containers.Tableau&&0===i.cards.length&&e.cards.length===n?!1:!0},i.prototype.getSpecialHint=function(){return this.stocks[0].cards.length>0||this.stocks[0].redealable()?{to:this.stocks[0]}:null},i.prototype.adjustLayout=function(t,i){var n=e.adjustLayout.call(this,t,i);this.initx=n.left+n.margin,this.inity=n.cheight/8,this.tableaus.forEach(function(t,e){t.setPos(n.margin+n.left+(2*n.margin+n.cwidth)*e,n.top)});var o=Math.floor((((2*n.margin+n.cwidth)*this.tableaus.length-(2*n.cwidth+4*n.margin))/this.foundations.length-n.cwidth)/2);o>n.margin&&(o=n.margin);var s=2*o-n.margin+n.left+(2*n.margin+n.cwidth)*this.tableaus.length-(n.cwidth+2*o)*this.foundations.length;return this.foundations.forEach(function(t,e){t.setPos(s+(n.cwidth+2*o)*e,Math.floor(n.cheight/8))}),this.stocks[0].setPos(n.left+n.margin,n.cheight/8),this.wastes[0]&&this.wastes[0].setPos(n.left+n.cwidth+3*n.margin-(this.tableaus.length>8?n.cwidth/10:0),n.cheight/8),n},i.prototype.isLost=function(t){return 0===t.length&&0===this.stocks[0].cards.length&&!this.stocks[0].redealable()}}(),function(){"use strict";var e=t.GameBase.prototype,i=t.games.Pyramid=function(e){this.setUpCardData("pyramid."+e),this.config={cards:52,flip:{type:"last",num:1,containers:["cardHolders","stocks"]},cardHolders:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],foundations:[0],stocks:[24],wastes:[0],stockRedealCount:2},t.containers.Foundation.setMode("onlyKing"),this.columns=7,this.rows=4.5,t.GameBase.call(this),this.automovePrefs=[this.foundations],this.stocks[0].setLayout("normal"),this.stocks[0].target=this.wastes[0],this.stocks[0].ejectCards=1,this.stocks[0].lastCardUp=!0,this.wastes[0].setLayout("normal");for(var i=0,n=0;7>n;n++)for(var o=0;n>=o;o++){var s=this.cardHolders[i];s.zAdd=n+7,6!==n&&(s.addBlockingContainer(this.cardHolders[i+n+1]),s.addBlockingContainer(this.cardHolders[i+n+2])),i++}t.gameSettings.autoplayMode="disabled",this.discardAll="pyramidnormal"===e,this.autoMoveFollowHint=!1};i.prototype=Object.create(e),i.prototype.hoverable=function(i){return e.hoverable.call(this,i)||i.ownedBy instanceof t.containers.Stock&&i===i.ownedBy.lastCard()},i.prototype.isLost=function(t){return 0===t.length&&0===this.stocks[0].cards.length&&!this.stocks[0].redealable()},i.prototype.getSpecialHint=function(){return this.stocks[0].redealable()||this.stocks[0].cards.length?{to:this.stocks[0]}:null},i.prototype.adjustLayout=function(t,i){var n=e.adjustLayout.call(this,t,i),o=(n.height-1.25*n.cheight)/6;2*o-n.cheight>2*n.margin?o=(2*n.margin+n.cheight)/2:n.margin=(2*o-n.cheight)/2;var s=n.cwidth+2*n.margin;n.left=Math.floor((t-s*this.columns)/2),this.initx=n.left-4*n.margin,this.inity=n.cheight/8;var a=n.left+(2*n.margin+n.cwidth)*(this.columns-1);this.foundations[0].setPos(a+n.margin,Math.floor(n.cheight/8)),this.stocks[0].setPos(Math.max(n.left-4*n.margin,26),n.cheight/8),this.wastes[0].setPos(Math.max(n.left-4*n.margin,26)+n.cwidth+7*n.margin,n.cheight/8);for(var r=0,c=0;7>c;c++)for(var h=(n.cwidth+2*n.margin)/2*(6-c)+n.left+n.margin,u=n.cheight/8+o*c,d=0;c>=d;d++)this.cardHolders[r].setPos(h+d*(2*n.margin+n.cwidth),u),r++;return n},i.prototype.getAutoFillMove=function(){return null},i.prototype.cardClicked=function(e){return 13!==e.num&&e.ownedBy instanceof t.containers.Stock&&e==e.ownedBy.lastCard()?e.ownedBy.eject():0},i.prototype.testAccept=function(e,i){if(e instanceof Array||(e=[e]),e.length>1)return!1;if(i.accept(e))return!0;if(i instanceof t.containers.Foundation||e[0].ownedBy instanceof t.containers.Foundation)return!1;if(!i.cards.length)return!1;if(i instanceof t.containers.CardHolder&&i.isBlocked())return!1;var n=e[0],o=i.lastCard();return 13===n.num+o.num},i.prototype.getMoveWhenDrop=function(i,n){return n instanceof t.containers.CardHolder||n instanceof t.containers.Waste||n instanceof t.containers.Stock?[{cards:[n.lastCard()],des:this.foundations[0]},{cards:i,des:this.foundations[0]}]:e.getMoveWhenDrop.call(this,i,n)},i.prototype.isWon=function(){return this.discardAll?this.foundations[0].cards.length===this.config.cards:0===this.cardHolders[0].cards.length},i.prototype.flipScale=1.1}(),function(){"use strict";var e=t.GameBase.prototype,i=t.games.Spider=function(e){this.setUpCardData("spider."+e);var i=t.containers.Tableau;this.config={cards:104,suits:parseInt(e,10),flip:{type:"last",num:1,containers:["tableaus"]},tableaus:[6,6,6,6,5,5,5,5,5,5],foundations:[0,0,0,0,0,0,0,0],stocks:[50],stockRedealCount:0},i.setWithCardAccept("sequence"),i.setMovableCards("sequence_same_suit"),i.setSpaceAccept("any"),this.onlyMaxLengthHint=!0,t.containers.Foundation.setMode("noManual"),t.containers.Stock.setEmptyCheck(function(){t.ui.gameAlert("Spider","There must be at least one card in each tableau column <br /> before you can deal a new row of cards.")}),this.columns=this.config.tableaus.length,this.rows=3,"simplesimon"==e?this.config={cards:52,suits:4,flip:"all",tableaus:[8,8,8,7,6,5,4,3,2,1],foundations:[0,0,0,0]}:"scorpion"==e&&(this.config={cards:52,suits:4,flip:{type:"tableaus",nums:[4,4,4,4,7,7,7]},tableaus:[7,7,7,7,7,7,7],stocks:[3],foundations:[0,0,0,0]},i.setWithCardAccept("suit"),i.setMovableCards("any"),i.setSpaceAccept("king"),t.containers.Stock.setEmptyCheck(null),this.columns=this.config.tableaus.length,this.rows=4,this.onlyMaxLengthHint=!1),t.GameBase.call(this),this.automovePrefs=[this.tableaus],this.stocks&&(this.stocks[0].setLayout("piles",{margin:10,numPerPile:10}),this.stocks[0].lastCardUp=!1,this.stocks[0].target=this.tableaus,this.stocks[0].ejectCards=1),t.gameSettings.autoplayMode="disabled"};i.prototype=Object.create(e),i.prototype.hoverable=function(i){return e.hoverable.call(this,i)||i.ownedBy instanceof t.containers.Stock&&i===i.ownedBy.lastCard()},i.prototype.considerHints=function(e,i,n){if(e instanceof t.containers.Foundation)return!1;if(i instanceof t.containers.Foundation)return!1;if(n){if(e instanceof t.containers.Tableau&&i instanceof t.containers.Tableau&&0===i.cards.length&&e.cards.length===n)return!1;if(this.onlyMaxLengthHint&&e instanceof t.containers.Tableau&&n!==e.maxCardOut())return!1}return!0},i.prototype.isLost=function(t){return 0===t.length&&this.stocks&&0===this.stocks[0].cards.length},i.prototype.getSpecialHint=function(){return this.stocks&&this.stocks[0].cards.length>0?{to:this.stocks[0]}:null},i.prototype.adjustLayout=function(t,i){var n=e.adjustLayout.call(this,t,i);this.initx=n.left+n.margin,this.inity=n.cheight/8,this.tableaus.forEach(function(t,e){t.setPos(n.margin+n.left+(2*n.margin+n.cwidth)*e,n.top)});var o=n.left+(2*n.margin+n.cwidth)*(this.columns-1);return this.foundations.forEach(function(t,e){t.setPos(o-(n.cwidth+2*n.margin)*e+n.margin,Math.floor(n.cheight/8))}),this.stocks&&(this.stocks[0].layoutOptions.margin=n.cwidth/4,this.stocks[0].setPos(n.left+n.margin,n.cheight/8)),n},i.prototype.getAutoFillMove=function(){for(var t=0;t<this.tableaus.length;t++){var e=this.tableaus[t];if(e.cards.length>=13){for(var i=e.cards.length-1;i>0&&1===e.cards[i-1].num-e.cards[i].num&&e.cards[i-1].type===e.cards[i].type;)i--;if(13===e.cards.length-i){for(var n,o=0;o<this.foundations.length;o++)if(0===this.foundations[o].cards.length){n=this.foundations[o];break}return{cards:e.getCards(13),destination:n,chain:!0}}}}return null}}(),function(){"use strict";$.fn.stop=$.fn.transitionStop,$.cssEase.easeOutCubic="cubic-bezier(0.215, 0.610, 0.355, 1.000)",$.cssEase.easeOutCirc="cubic-bezier(0.075, 0.820, 0.165, 1.000)",$.cssEase.easeOutBack="cubic-bezier(0,1,0.5,1.3)",$.cssEase.easeInCubic=$.cssEase.in,$.cssEase.linear="linear";var e=t.game,i=t.ui,n=t.config,o=t.resources,s=t.gameSettings,a=t.cardData,r=function(){var e=$.Deferred();if(uniStore==t.cachedChromeStorage)return e.resolve(),e;var i=uniStore.getVersion();return i!==t.config.version?0===i?(console&&console.log("Migrating"),$.ajax({type:"GET",url:"solitaire/js/app/migrate/migrate-"+i+"-"+t.config.version+".js",dataType:"text",async:!0}).done(function(t){Function(t)(),console&&console.log("Done migrating."),e.resolve()})):(s.ini(),e.resolve()):e.resolve(),e};t.ready=function(){$("#game-ui").css("minHeight",""),n.isMobilePhone&&$("body").addClass("mobilePhone"),r().done(function(){uniStore.loadToCache(function(){uniStore.setVersion(t.config.version),s.lastGame?s.load():s.ini(),o.setCardset(s.cardset),o.setCardback(s.cardback),o.setBackground(s.background),setTimeout(t.delayedReady,1e3)})})},t.delayedReady=function(){if(!n.isApp&&n.isiOS7&&window.innerHeight<window.innerWidth&&$("html").addClass("ios7"),n.isApp&&n.isiOS7&&$("html").addClass("ios7-app"),window.scrollTo(0,0),e.setGameDom($("#playArea")),$(window).resize(function(){e.scheduleUpdateDisplay(100)}),n.isChromePackagedApp||$(window).on("unload",function(){e.save()}),i.loadAppearanceOptions(),i.loadGames($("#group-games")),$.when(o.download(),t.audio.getDeferred(),o.doneExtraImages()).done(function(){i.loading.hide(),window.cordova&&navigator.splashscreen.hide(),t.startPlaying()}),o.updateImages(),$.mobile.defaultDialogTransition="none",$.mobile.defaultPageTransition="none",$.mobile.buttonMarkup.hoverDelay=0,$.browser.chrome&&$(".only-chrome").css("display","block"),$(window).on("resize",function(){!n.isApp&&n.isiOS7&&window.innerHeight<window.innerWidth?$("html").addClass("ios7"):$("html").removeClass("ios7"),window.scrollTo(0,0),$("#game-ui").css("minHeight",""),parseInt($("#main-ui-popup").css("left"),10)>-1e3&&i.adjustGameSelector()}),$("#game-ui").css("minHeight",""),"windows"!=n.isApp&&$("#playArea").css("left",0),s.useCSS3)$.fn.stop=$.fn.transitionStop;else{$.fn.transition=$.fn.animate;for(var r=["x","y","scaleX","scaleY"],c=0;c<r.length;c++)!function(t){$.fx.step[t]=function(e){$.cssHooks[t].set(e.elem,e.now+e.unit)}}(r[c]);$(".bottomButton").css("box-shadow","none"),$.fx.step.boxShadow=function(){},$.cssHooks.boxShadow={get:function(){return null},set:function(){}},$.fx.step.ieBoxShadow=function(t){t.elem.style.boxShadow=t.end},$.cssHooks.ieBoxShadow={get:function(t){return t.style.boxShadow},set:function(t,e){t.style.boxShadow=e}}}$.browser.msie&&($.browser.version<10||"ARM"===navigator.cpuClass.toUpperCase)&&($("#effect-toggle").remove(),$("#swing-item").remove()),(!$.browser.msie||$.browser.version<10)&&$("#css3-toggle").remove(),$.mobile.zoom.disable(),$(window).off("orientationchange.iosorientationfix").off("devicemotion.iosorientationfix"),n.isiOS?$("#expand-item").remove():$("#game-ui").css("overflow","hidden"),$(document).bind("contextmenu",function(){}),document.onselectstart=function(){return!1},$("#main-nav").find("li").click(function(){var t=$(this);$("#main-groups").children().removeClass("current"),$("#group-"+t.html().toLowerCase()).addClass("current"),t.parent().children().removeClass("current"),t.addClass("current")}),$("#new-game-but").click(function(){i.showPopup("new-game-dialog")}),$("#undo-but").click(function(){e.applyUndo()}),$("#redo-but").click(function(){e.applyRedo()}),$("#hint-but").click(function(){e.showHint()}),$("#scores-but").click(function(){i.showPopup("stats-dialog")}),$("#rules-but").click(function(){i.showRules()});var h,u,d=$("#settings-dialog").add("#appearance-dialog").add("#options-dialog").add("#main-ui").add("#clear-stats-dialog").add("#about-dialog").add("#win-dialog").add("#new-game-dialog").add("#stats-dialog").add("#rules-dialog").add("#info-dialog");n.isMobilePhone?(d.addClass("onphone").addClass("phone-popup").appendTo("body").page(),h="pagebeforeshow",u="pagehide",$("#playArea").on("vclick",function(t){"playArea"===t.target.id&&$(".bottomBar").toggleClass("hidden")})):(d.popup({history:!1}),h="popupafteropen",u="popupafterclose"),$("#settings-but").click(function(){i.showPopup("settings-dialog")}),$("#appearance-but").click(function(){i.showPopup("appearance-dialog")}),$("#options-but").click(function(){i.showPopup("options-dialog")}),$("#clear-stats-but").click(function(){i.showPopup("clear-stats-dialog")}),$("#about-but").click(function(){i.showPopup("about-dialog")}),$("#appearance-dialog").on(h,function(){$("#cardsets-tab").attr("checked",!0),$(this).find(".single-list").hide(),$("#cardsets-list").show(),$(this).find("input[type=radio]").checkboxradio("refresh")}),$(".single-tab").click(function(){$(this).parentsUntil("fieldset").parent().parent().find(".single-list").hide(),$("#"+this.id.split("-")[0]+"-list").show()}),$(".start-new").click(function(){e.start(),$.mobile.changePage("#game-ui",{reverse:!0,changeHash:!1})}),$(".select-game").click(function(){i.showGameSelector()}),$(".restart").click(function(){e.restart(),$.mobile.changePage("#game-ui",{reverse:!0,changeHash:!1})}),$("#stats-reset-button").click(function(){a.clearInfo(),i.showPopup("stats-dialog")}),$("#options-dialog").on(u,function(){e.autoFill()}),$("#expand-option").on("change",function(){s.expandCard="on"===$(this).val()}),$("#swing-option").on("change",function(){s._0$="on"===$(this).val()}),$("#effect-option").on("change",function(){s.cardEffect="on"===$(this).val()}),$("#css3-option").on("change",function(){s.useCSS3="on"==$(this).val(),i.gameAlert("Reload Needed","The game needs to reload to take effect",function(){location.reload()})}),$("#sound-option").on("change",function(){s.soundOn="on"===$(this).val()}),$("#autoplay-option input[type='radio']").on("change",function(){s.autoplayMode=$(this).val()}),$("#moves-toggle").on("change",function(){s._1$=this.checked}),$("#score-toggle").on("change",function(){s.showScore=this.checked}),$("#time-toggle").on("change",function(){s.showTime=this.checked}),$("#rules-dialog").on("popupafteropen",function(){$("#rules-dialog-popup").css("top",0)});var l=document.createElement("div");$(l).css({margin:"0 auto",width:400,height:220}),$('#stats-dialog>div[data-role="content"]').prepend(l),$("#stats-dialog").on(h,function(){var t=[{data:a.gameWinCount,name:"Won",color:"#A2E100"},{data:a.gamePlayCount-a.gameWinCount-1,name:"Lost",color:"#E12B1E"}];e.playing()||t[1].data++,i.raphPie(l,t)}),$(".ui-popup-screen:not(#rules-dialog-screen)").off("vclick"),$(document).bind("keydown","ctrl+z",function(){e.applyUndo()}).bind("keydown","ctrl+y",function(){e.applyRedo()}).bind("keypress","h",function(){e.showHint()}),uniStore.isCached&&(e.onMoveOccurred=e.save)},"windows"!=n.isApp?$(document).ready(function(){t.config.isApp||($("#darkenArea").html("<div id='loadingBox'>Loading<br /><img src='solitaire/loading.gif' /></div>"),$("#shareButtonsGroup").html('<div class="fb-like" data-href="http://www.facebook.com/NetSolitaire" data-send="false" data-layout="button_count" data-width="50" data-show-faces="false"></div><div class="g-plusone" data-size="medium" data-href="http://www.netsolitaire.com"></div>'),function(t,e,i){var n,o=t.getElementsByTagName(e)[0];t.getElementById(i)||(n=t.createElement(e),n.id=i,n.src="//connect.facebook.net/en_US/all.js#xfbml=1",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk"),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://apis.google.com/js/plusone.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()),t.ready()}):t.winAppify()}()}();