/**
* Preset resources for Plus 2 Unlock
* for jQuery: http://onepress-media.com/plugin/plus-2-unlock-for-google/get
* for Wordpress: http://onepress-media.com/plugin/plus-2-unlock-for-google-wordpress/get
*
* Copyright 2012, OnePress, http://onepress-media.com/portfolio
* Help Desk: http://support.onepress-media.com/
*/

(function ($) {

    if (!$.onepress) $.onepress = {};
    if (!$.onepress.lang) $.onepress.lang = {};

    $.onepress.lang.toplus = {

        defaultMessage: 'The content is locked. Please click the +1 button and view the hidden content.', 
        orWait: 'or wait',
        close: 'Close'
    };
})(jQuery);;;

(function(a){if(!a.onepress){a.onepress={};}if(!a.onepress.tools){a.onepress.tools={};}a.onepress.tools.cookie=a.onepress.tools.cookie||function(e,k,f){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(k))||k===null||k===undefined)){f=a.extend({},f);if(k===null||k===undefined){f.expires=-1;}if(typeof f.expires==="number"){var b=f.expires,j=f.expires=new Date();j.setDate(j.getDate()+b);}k=String(k);return(document.cookie=[encodeURIComponent(e),"=",f.raw?k:encodeURIComponent(k),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join(""));}f=k||{};var c=f.raw?function(i){return i;}:decodeURIComponent;var h=document.cookie.split("; ");for(var d=0,g;g=h[d]&&h[d].split("=");d++){if(c(g[0])===e){return c(g[1]||"");}}return null;};a.onepress.tools.hash=a.onepress.tools.hash||function(e){var c=0;if(e.length==0){return c;}for(var d=0;d<e.length;d++){var b=e.charCodeAt(d);c=((c<<5)-c)+b;c=c&c;}c=c.toString(16);c=c.replace("-","0");return c;};a.onepress.widget=function(c,d){var b={createWidget:function(e,f){var g=a.extend(true,{},d);g.element=a(e);g.options=a.extend(true,g.options,f);if(g._init){g._init();}if(g._create){g._create();}a.data(e,"plugin_"+c,g);},callMethod:function(f,e){f[e]&&f[e]();}};a.fn[c]=function(){var e=arguments;var f=arguments.length;this.each(function(){var g=a.data(this,"plugin_"+c);if(!g&&f<=1){b.createWidget(this,f?e[0]:false);}else{if(f==1){b.callMethod(g,e[0]);}}});};};})(jQuery);(function(a){if(!a.onepress){a.onepress={};}if(a.onepress.google){return;}a.onepress.google={_sdkScriptId:"google-jssdk",_root:null,_eventsCreated:false,_isConnectedByThis:false,_isLoaded:false,_isProcessedOnce:false,_isAPI:function(){return(typeof(window.gapi)==="object");},_isSdkconnected:function(){return(this._getLoadingScript().length>0);},_getLoadingScript:function(){var b=a("#"+this._sdkScriptId);var c=a("script[src^='https://apis.google.com/js/plusone.js']");return(b.length>0)?b:c;},_isSdkLoading:function(){return !this._isAPI()&&this._isSdkconnected();},_isSdkNotLoaded:function(){return !this._isAPI()&&!this._isSdkconnected();},_isSdkLoaded:function(){return this._isAPI();},loadSDK:function(c,b){var e=this;if(b){if(this._isLoaded){b();}else{this.bind("gp-ready",function(){b();});}}if(this._isProcessedOnce){return;}this._isProcessedOnce=true;this._createConfig(c);a(document).bind("gp-init",function(){e._initGoogleEvents();e._renderAll();e._isLoaded=true;a(document).trigger("gp-ready");});if(this._isSdkNotLoaded()){if(this._isConnectedByThis||this._isLoaded){return;}var d=document.createElement("script");d.type="text/javascript";d.id=this._sdkScriptId;d.src="https://apis.google.com/js/plusone.js";a("body").append(a(d));this._isConnectedByThis=true;}this._callEvents();},_createConfig:function(b){if(window.___gcfg){window.___gcfg.parsetags="explicit";return;}window.___gcfg={lang:b,parsetags:"explicit"};},_callEvents:function(){var d=this;d._scriptIsAlreadyLoaded=false;if(this._isSdkLoading()){var c=this._getLoadingScript()[0];var b=function(){var e=c.readyState;if((!e||/loaded|complete/.test(e))){if(d._scriptIsAlreadyLoaded===false){a(document).trigger("gp-init");}d._scriptIsAlreadyLoaded=true;}};c.onreadystatechange=b;if(!a.browser.msie){c.onload=b;}}else{a(document).trigger("gp-init");}},_initGoogleEvents:function(){window.onepressPlusOneCallback=function(b){if(b.state=="on"){a(document).trigger("gp-like",[b.href]);}else{if(b.state=="off"){a(document).trigger("gp-dislike",[b.href]);}}};},_renderAll:function(){var b=this;a(".g-plusone").each(function(){b.render(a(this));});},render:function(b){var c=b.data("onepress-goolge-api");if(!c){this._addCallbackToControl(b);window.gapi.plusone.go(b.parent()[0]);}},renderWidget:function(b){var c=b.data("onepress-goolge-api");if(c){var d=this;setTimeout(function(){var e=c.getHtmlToRender();d._addCallbackToControl(e);e.find(".fake-g-plusone").addClass("g-plusone");window.gapi.plusone.go(e[0]);b.trigger("gp-render");},100);}},_addCallbackToControl:function(b){var c=(!b.is(".g-plusone"))?b.find(".fake-g-plusone"):b;var d=c.attr("data-callback");if(d&&d!="onepressPlusOneCallback"){var e="__plusone_"+d;window[e]=function(f){window[d](f);window.onepressPlusOneCallback(f);};c.attr("data-callback",e);}else{c.attr("data-callback","onepressPlusOneCallback");}},bind:function(c,b){a(document).bind(c,b);},isLogged:function(b){if(this._isLoginChecked){return b(this._isLoggetInto);}var e=this;if(this._loginStateisChecking){return a(document).bind("gl-is-logged",function(){b(e._isLoggetInto);});}this._loginStateisChecking=true;var d=function(f){e._isLoginChecked=true;e._isLoggetInto=f;e._loginStateisChecking=false;b(f);a(document).trigger("gl-is-logged");};var c=a("<img>");c.bind("load",function(){d(true);});c.bind("error",function(){d(false);});c.attr("src","https://accounts.google.com/CheckCookie?continue=https%3A%2F%2Fwww.google.com%2Fintl%2Fen%2Fimages%2Flogos%2Faccounts_logo.png&followup=https%3A%2F%2Fwww.google.com%2Fintl%2Fen%2Fimages%2Flogos%2Faccounts_logo.png&chtml=LoginDoneHtml&checkedDomains=youtube&checkConnection=youtube%3A291%3A1");c.css("display","none");c.appendTo("body");}};a(function(){return window.googleSDK&&a.onepress.facebook.loadSDK(window.googleSDK.lang);});})(jQuery);(function(a){a.onepress.widget("glplus",{options:{},_defaults:{lang:"en-US",url:null,size:null,annotation:null,width:null,align:"left",expandTo:"",recommendations:true,render:null,like:null,dislike:null},_create:function(){var b=this;this._prepareOptions();this._setupEvents();this.element.data("onepress-goolge-api",this);this._createButton();a.onepress.google.loadSDK(this.options.lang,function(){a.onepress.google.renderWidget(b.element);});},_prepareOptions:function(){var b=a.extend({},this._defaults);if(this.element.data("href")!==undefined){b.url=this.element.data("href");}if(this.element.data("url")!==undefined){b.url=this.element.data("url");}if(this.element.data("size")!==undefined){b.size=this.element.data("size");}if(this.element.data("annotation")!==undefined){b.annotation=this.element.data("annotation");}if(this.element.data("align")!==undefined){b.align=this.element.data("align");}if(this.element.data("width")!==undefined){b.width=this.element.data("width");}if(this.element.data("expandTo")!==undefined){b.expandTo=this.element.data("expandTo");}if(this.element.data("recommendations")!==undefined){b.recommendations=this.element.data("recommendations");}b=a.extend(b,this.options);this.options=b;this.url=(!this.options.url)?window.location:this.options.url;},_setupEvents:function(){var b=this;a(document).bind("gp-like",function(c,d){if(b.options.like&&(b.url==d||(b.url+"/")==d)){b.options.like(d,b);}});a(document).bind("gp-dislike",function(c,d){if(b.options.dislike&&(b.url==d||(b.url+"/")==d)){b.options.dislike(d,b);}});a(this.element).bind("gl-render",function(){if(b.options.render){b.options.render(b.element,[b]);}});},_createButton:function(){var c;if(!this.element.is(".g-plusone")){var b=a("<div class='fake-g-plusone'></div>");b.data("facebook-widget",this);if(this.options.url){b.attr("data-href",this.options.url);}if(this.options.size){b.attr("data-size",this.options.size);}if(this.options.annotation){b.attr("data-annotation",this.options.annotation);}if(this.options.align){b.attr("data-align",this.options.align);}if(this.options.expandTo){b.attr("data-expandTo",this.options.expandTo);}if(this.options.recommendations){b.attr("data-recommendations",this.options.recommendations);}this.element.append(b);c=this.element;}else{c=a("<div></div>").append(this.element);}c.addClass("ui-social-button ui-google ui-goole-plusone");},getHtmlToRender:function(){if(this.element.is(".g-plusone")){return this.element.parent();}return this.element;}});})(jQuery);(function(a){if(a.fn.toPlusOne){return;}a.onepress.widget("toPlusOne",{options:{locker:{},google:{},events:{}},_defaults:{url:null,text:a.onepress.lang.toplus.defaultMessage,style:null,highlight:true,demo:false,locker:{inverse:false,close:false,timer:false,mobile:true,loggedOnly:false,watchdog:15000},content:null,google:{lang:"en-US",size:"standard",annotation:"inline",width:null,align:"left",expandTo:"",recommendations:true},events:{lock:null,unlock:null,unlockByTimer:null,unlockByClose:null,unlockByWatchdog:null,ready:null}},_create:function(){var b=this;this._parseOptions();if(a.browser.msie&&parseInt(a.browser.version,10)<=7){this._unlock("ie7");return;}if(!this.options.locker.mobile&&this._isMobile()){this._unlock("mobile");return;}this._provider=new a.onepress.localGoogleStoreStateProvider(this.url,this,this.options.demo);if(this._error){this.element.show();return;}if(!this.options.locker.loggedOnly||b._provider.isUnlocked()){var c=b._provider.isUnlocked();!c?b._lock("provider"):b._unlock("provider");if(b.options.events.ready){b.options.events.ready(c?"unlocked":"locked");}return;}this._setLoadingState(true);b._runWatchdog("[google-locker-check-login]");this._checkLogin(function(d){b._stopWatchdog();d?b._lock("provider"):b._unlock("provider");if(b.options.events.ready){b.options.events.ready("locked");}});},_isMobile:function(){return(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent));},_parseOptions:function(){var b=a.extend(true,{},this._defaults,this.options);if(!b.text){b.text=a.onepress.lang.tolike.defaultMessage;}b.text=(typeof b.text==="function"&&b.text(this))||(typeof b.text==="string"&&a("<div>"+b.text+"</div>"))||(typeof b.text==="object"&&b.text.clone());if(b.locker.timer&&!parseInt(b.locker.timer)){b.locker.timer=null;}b.locker.watchdog=parseInt(b.locker.watchdog);this.url=this.url||this.options.url||window.location.href;this.identity=a.onepress.tools.hash(this.url);this.element.addClass("identity-"+this.identity).addClass("ui-locker-content");this.options=b;},_runWatchdog:function(c){if(!this.options.locker.watchdog){return;}var b=this;this._watchdog=setTimeout(function(){b._stoppedByWatchdog=true;b._unlock("watchdog");if(c&&console){var d="Watchdog: "+c;(console.debug&&console.debug(d))||(console.log&&console.log(d));}},this.options.locker.watchdog);},_stopWatchdog:function(){if(!this._watchdog){return;}clearTimeout(this._watchdog);this._watchdog=null;},_checkLogin:function(b){a.onepress.google.loadSDK(this.options.google.lang,function(){a.onepress.google.isLogged(function(d,c){b(d,c);});});},_setLoadingState:function(c){if(!c){if(this.loadingState){this.loadingState.remove();}return;}var b=(this.element.parent().is("a"))?this.element.parent():this.element;this.loadingState=a("<div class='ui-locker-loading-holder'></div>").insertAfter(b);this.element.hide();},_setError:function(b){this._error=true;this._errorText=b;this._setLoadingState(false);this.locker&&this.locker.hide();this.element.html("<strong>[Error]: "+b+"</strong>");this.element.show().addClass("ui-facebook-locker-error");},_createMarkup:function(){var d=this;var c=(jQuery.browser.mozilla&&"mozilla")||(jQuery.browser.opera&&"opera")||(jQuery.browser.webkit&&"webkit")||"msie";this.locker=a("<div class='ui-locker-google ui-locker-"+c+"'></div>").hide();this.outerWrap=a("<div class='ui-locker-outer-wrap'></div>").appendTo(this.locker);this.innerWrap=a("<div class='ui-locker-inner-wrap'></div>").appendTo(this.outerWrap);this.element.addClass("ui-locker-content");this.locker.addClass(this.options.style);this.options.text.addClass("ui-locker-text").show();this.options.text.prepend((a("<div class='ui-locker-decorator-3'></div>")));this.options.text.append((a("<div class='ui-locker-decorator-4'></div>")));this.buttonsWrap=a("<div class='ui-locker-buttons'></div>");this.buttonWrap=a("<div class='ui-locker-button'></div>").appendTo(this.buttonsWrap);this.buttonsWrap.prepend(a("<div class='ui-locker-decorator-5'></div>"));this.innerWrap.append(a("<div class='ui-locker-decorator-1'></div>"));if(this.options.locker.inverse){this.innerWrap.append(this.buttonsWrap);this.innerWrap.append(this.options.text);this.locker.addClass("ui-locker-inverse");}else{this.innerWrap.append(this.options.text);this.innerWrap.append(this.buttonsWrap);}this.innerWrap.append(a("<div class='ui-locker-decorator-2'></div>"));this.buttonsWrap.append((a("<div class='ui-locker-decorator-6'></div>")));if(this._createSocialButtons){this._createSocialButtons(this.locker,this.buttonWrap);}this.options.locker.close&&this._createCloseButton();this.options.locker.timer&&this._createTimer();var b=(this.element.parent().is("a"))?this.element.parent():this.element;this.locker.insertAfter(b);this._markupIsCreated=true;},_createCloseButton:function(){var b=this;this.closeButton=a("<div title='"+a.onepress.lang.toplus.close+"' class='ui-locker-close-icon'></div>");this.closeButton.prependTo(this.locker);this.closeButton.click(function(){if(!b.close||b.close(b)){b._unlock("close");}});},_createTimer:function(){this.timer=a("<span class='ui-locker-timer'></span>");var b=a.onepress.lang.toplus.orWait;this.timerLabel=a("<span class='ui-locker-timer-label'>"+b+" </span>").appendTo(this.timer);this.timerCounter=a("<span class='ui-locker-timer-counter'>"+this.options.locker.timer+"s</span>").appendTo(this.timer);this.timer.appendTo(this.locker);this.counter=this.options.locker.timer;this._kickTimer();},_kickTimer:function(){var b=this;setTimeout(function(){if(!b._isLocked){return;}b.counter--;if(b.counter<=0){b._unlock("timer");}else{b.timerCounter.text(b.counter+"s");if(a.browser.opera){var c=b.timerCounter.clone();c.insertAfter(b.timerCounter);b.timerCounter.remove();b.timerCounter=c;}b._kickTimer();}},1000);},_createSocialButtons:function(d,b){var e=this;var c=a.extend({},this.options.google);if(this.options.url){c.url=this.options.url;}c.like=function(){e._unlock("button");};c.dislike=function(){e._lock("button");};this.backup=b.clone();this.socialButton=b.glplus(c);},_lock:function(c,b){this._setLoadingState(false);if(this._isLocked||this._stoppedByWatchdog){return;}if(!this._markupIsCreated){this._createMarkup();}if(c=="button"){this._provider.setState("locked");}this.element.hide();this.locker.fadeIn(1000);this._isLocked=true;if(this.options.events.lock){this.options.events.lock(this);}},_unlock:function(d,c){var b=this;this._setLoadingState(false);if(d=="watchdog"&&this.options.events.unlockByWatchdog){return this.options.events.unlockByWatchdog();}if(!this._isLocked){this._showContent(true);return false;}if(d=="button"){this._provider.setState("unlocked");}this._showContent(true);this._isLocked=false;if(d=="timer"&&this.options.events.unlockByTimer){return this.options.events.unlockByTimer();}if(d=="close"&&this.options.events.unlockByClose){return this.options.events.unlockByClose();}if(this.options.events.unlock){this.options.events.unlock();}},_showContent:function(h){var g=this;var f=function(){if(g.locker){g.locker.hide();}if(!h){g.element.show();return;}g.element.fadeIn(1000,function(){g.options.highlight&&g.element.effect&&g.element.effect("highlight",{color:"#fffbcc"},800);});};if(!this.options.content){f();}else{if(typeof this.options.content==="string"){this.element.html(this.options.content);f();}else{if(typeof this.options.content==="object"&&!this.options.content.url){this.element.append(this.options.content.clone().show());f();}else{if(typeof this.options.content==="object"&&this.options.content.url){var b=a.extend(true,{},this.options.content);var e=b.success;var c=b.complete;var d=b.error;b.success=function(i,k,j){!e?g.element.html(i):e(g,i,k,j);f();};b.error=function(j,k,i){g._setError("An error is triggered during the ajax request! Text: "+k+" "+i);d&&d(j,k,i);};b.complete=function(i,j){c&&c(i,j);};a.ajax(b);}else{f();}}}}}});a.fn.tolike=function(b){b=a.extend({},b);a(this).toLike(b);};})(jQuery);(function(a){a.onepress.localGoogleStoreStateProvider=function(d,b,c){this.url=d;this.identity="page_"+a.onepress.tools.hash(d)+"_gl";this.isUsable=function(e){e(true);};this.lock=function(){};this.isUnlocked=function(){if(c){return false;}return(this._getValue())?true:false;};this.isLocked=function(){return !this.isUnlocked();};this.getState=function(e){e(this.isUnlocked());};this.setState=function(e){if(c){return false;}return e=="unlocked"?this._setValue():this._removeValue();};this._setValue=function(){if(localStorage){localStorage.setItem(this.identity,true);}else{a.onepress.tools.cookie(this.identity,true,{expires:356*10,path:"/"});}};this._getValue=function(){if(!localStorage){return a.onepress.tools.cookie(this.identity);}var e=localStorage.getItem(this.identity);if(e){return e;}e=a.onepress.tools.cookie(this.identity);if(e){this._setValue();}return e;};this._removeValue=function(){if(localStorage){localStorage.removeItem(this.identity);}a.onepress.tools.cookie(this.identity,null);};};})(jQuery);