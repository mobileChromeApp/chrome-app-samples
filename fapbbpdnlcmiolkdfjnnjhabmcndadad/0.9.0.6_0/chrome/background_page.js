var places=Places($.extend({language:chrome.settings.get("language")},chrome.settings.get("api.geoplanet")));var geolocation=Geolocation(chrome.settings.get("api.geolocation"));$(document).ready(function(){function a(){Weather.update(chrome.settings.get("favorite"))}if(chrome.settings.get("notification.active")===false){chrome.settings.set("notification.forecast",false);chrome.settings.set("notification.present",false)}if(!chrome.settings.has("favorite")){geolocation.getCurrentPosition(function(b){places.getPlace(b,function(c){if(c){chrome.settings.set("favorite",c);a()}})})}else{a()}setInterval(a,chrome.settings.get("interval"));chrome.idle.onStateChanged.addListener(function(b){a()})});