function Place(b){if(!(this instanceof Place)){return new Place(b)}var a=this;["city","area","country","reference"].forEach(function(c){if(c in b){a[c]=b[c]}})}Place.prototype={get name(){return[this.city,this.area,this.country].filter(function(a){return !!a}).join(", ")},toString:function(){return this.name}};function Places(a){var b=arguments.callee;if(!(this instanceof b)){return new b(a)}this.options=a}Places.prototype={getPlace:function(b,c){function a(d,e){return d.replace(/\{([^{}]+)\}/g,function(){return e[arguments[1]]})}$.get(a(this.options.url.search,{latitude:b.latitude,longitude:b.longitude,language:this.options.language}),function(e){if(e.status==="OK"&&e.results&&e.results[0]){var d=e.results[0];if(typeof c==="function"){c({longitude:b.longitude,latitude:b.latitude,city:d.name,reference:d.reference})}}})},search:function getPlaces(b,c){function a(d,e){return d.replace(/\{([^{}]+)\}/g,function(){return e[arguments[1]]})}$.get(a(this.options.url.autocomplete,{language:this.options.language,input:b}),function(d){if(d.status=="OK"){if(typeof c==="function"){var e=d.predictions.map(function(g){var h=g.terms.map(function(i){return i.value});var f={reference:g.reference};f.city=h.shift();if(h.length>0){f.country=h.pop()}if(h.length>0){f.area=h.shift()}return Place(f)});c(e)}}else{c(null)}})},getDetail:function(b,c){function a(d,e){return d.replace(/\{([^{}]+)\}/g,function(){return e[arguments[1]]})}$.get(a(this.options.url.detail,{language:this.options.language,reference:b.reference}),function(d){if(d.status=="OK"){if(typeof c==="function"){b.latitude=d.result.geometry.location.lat;b.longitude=d.result.geometry.location.lng;b.attributions=d.html_attributions;c(b)}}else{c(null)}})}};