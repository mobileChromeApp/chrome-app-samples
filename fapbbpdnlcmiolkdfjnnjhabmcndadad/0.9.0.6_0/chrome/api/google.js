var GoogleWeatherAPITemplate;function GoogleWeatherAPI(a){var b=arguments.callee;if(!(this instanceof b)){return new b(a)}this.options=a}GoogleWeatherAPI.prototype={getForecast:function(a,g){var f=this;var c=this.options.url;function d(h){if(h===undefined){return""}if(Math.abs(h)<1){return(h<0?"-":"")+"00"+String(Math.abs(Math.round(h*1000000)))}if(Math.abs(h)<10){return(h<0?"-":"")+"0"+String(Math.abs(Math.round(h*1000000)))}if(Math.abs(h)<100){return(h<0?"-":"")+String(Math.abs(Math.round(h*1000000)))}return(h<0?"-":"")+String(Math.abs(Math.round(h*1000000)))}function e(){$.get(formatQueryString(c,{language:f.options.language,input:[a.city||"",a.area||"",a.country||"",d(a.latitude),d(a.longitude)].join(",")}),function(j,k,i){var h;oForecastData=$(j).extract(GoogleWeatherAPITemplate);if(!oForecastData||!oForecastData.unitSystem){return g&&g(null)}if(oForecastData.current.icon){oForecastData.current.icon={path:oForecastData.current.icon.split("/").pop(),url:/^[\w-]+:/.test(oForecastData.current.icon)?oForecastData.current.icon:c.split("/").slice(0,3).concat(oForecastData.current.icon.slice(1)).join("/")}}oForecastData.forecast.forEach(function(l){if(l.icon){l.icon={path:l.icon.split("/").pop(),url:/^[\w-]+:/.test(l.icon)?l.icon:c.split("/").slice(0,3).concat(l.icon.slice(1)).join("/")}}if(oForecastData.unitSystem!="SI"){l.high=Temperature.FtoC(l.high);l.low=Temperature.FtoC(l.low)}});oForecastData.date=(new Date()).getTime();oForecastData.reference=a.reference;chrome.settings.set("weather",oForecastData);if(typeof g==="function"){g(oForecastData)}})}function b(){var h;if(h=cacheGet(a.reference)){g(h)}else{e(function(i){cacheSet(a.reference,i)})}}if(GoogleWeatherAPITemplate){b()}else{$.getJSON(chrome.extension.getURL("templates/google-weather.json"),function(h){GoogleWeatherAPITemplate=h;b()})}}};