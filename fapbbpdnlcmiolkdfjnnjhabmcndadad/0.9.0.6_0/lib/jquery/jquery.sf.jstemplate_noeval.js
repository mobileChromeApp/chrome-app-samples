instance=1;function getValueFromStringAndContext(f,b){var d;var e=f.split(".");var a=e.shift();switch(a){case"this":d=node;break;case"$this":d=b;break;default:try{if(/(\w+)\[\s*(\d+)\s*\]/.test(a)){d=b[RegExp.$1][RegExp.$2]}d=b[a]}catch(c){throw new Error(a)}}if(e.length>0){return arguments.callee(e.join("."),d)}else{return d}}function getValueFromString(f,a,c){var h;var e;try{if(f==undefined){throw new Error("Parse Error")}if(/\((.*)\)\s*$/.test(f)){e=RegExp.$1.split(",").map(function(j){return getValueFromString(j,a,c)});f=f.replace(/\(.*\)\s*$/,"")}var g=f.split(".");var i=g.shift();switch(i){case"this":h=c;break;case"$this":h=a;break;default:if(i[0]=="'"&&i[i.length-1]=="'"||i[0]=='"'&&i[i.length-1]=='"'){h=i.slice(1,-1)}else{if(a==null){h=null}else{if(typeof a=="object"&&i in a){h=a[i]}else{h=window[i]}}}}var b=(g.length>0)?getValueFromStringAndContext(g.join("."),h):h;if(e){if(!b){throw new Error("unkown function")}return b.apply(c,e)}if(b===undefined){}return b}catch(d){console.warn(d.message,f,a,c);return null}}$.extend($.fn,{firstDescendants:function(a){function b(d,c){var e=[];var f=document.createTreeWalker(d,NodeFilter.SHOW_ELEMENT,{acceptNode:function(g){if($(g).is(c)){e.push(g);return NodeFilter.FILTER_REJECT}if(stopSelector&&$(g).is(stopSelector)){return NodeFilter.FILTER_REJECT}return $(g).is(c)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}});while(node=f.nextNode()){}return e}return $(this).map(function(){return b(this,a)})},descendantsUntill:function(a,b){function c(e,d){var f=[];var g=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(h){if(b&&$(h).is(b)){return NodeFilter.FILTER_REJECT}if($(h).is(d)){return NodeFilter.FILTER_ACCEPT}return NodeFilter.FILTER_SKIP}});while(node=g.nextNode()){f.push(node)}return f}return $(this).map(function(){return c(this,a)})},jsTemplate:function(b,a){return $(this).each(function(){var d=this;var c=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(f){if($(f).is("[jsselect]")){var e=$(f).attr("jsselect").trim();var h="_node";if(f[h]){f[h].forEach(function(i){$(i).remove()})}if($(f).is("[jstinstance='"+e+"']")){return NodeFilter.FILTER_REJECT}var g=getValueFromString(e,b,f);if($.isArray(g)){f[h]=g.map(function(i){return $(f).hide().clone().show().attr("jstinstance",e).each(function(){$(this).data(e,i)}).insertBefore(f).jsTemplate(i)})}else{$(f).each(function(){$(this).data(e,g)}).show().jsTemplate(g)}return NodeFilter.FILTER_REJECT}if($(f).is("[jsvalues]")){$(f).attr("jsvalues").split(";").filter(function(i){return i!=""}).forEach(function(j){var l=j.split(":").map(function(n){return n.trim()});var k=getValueFromString(l[1],b,f);if(l[0][0]=="."){var m=l[0].split(".");if(m.length>2){var i=getValueFromStringAndContext(m.slice(1,-1).join("."),f);i[m[m.length-1]]=k}else{f[m[m.length-1]]=k}}else{$(f).attr(l[0],k)}})}if($(f).is("[jsdisplay]")){var e=$(f).attr("jsdisplay").trim();var g=!!getValueFromString(e,b,f);$(f).toggle(g);if(!g){return NodeFilter.FILTER_SKIP}}if($(f).is("[jscontent]")){var e=$(f).attr("jscontent").trim();var g=getValueFromString(e,b,f);$(f).html(g)}return NodeFilter.FILTER_ACCEPT}});while(node=c.nextNode()){}})}});