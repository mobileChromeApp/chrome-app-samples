(function(f){var j=this;var k=j.document;var i;var e;var g={};const c=(function(){var p;return{get container(){return k.querySelector("content")||k.documentElement.appendChild(p=k.createElement("content"))&&p}}})();function h(p){var t=k.createNodeIterator(p,NodeFilter.SHOW_ELEMENT,null,false);var s;var q=[];while(s=t.nextNode()){var r=k.defaultView.getComputedStyle(s,"");if(!r){continue}if(r.position=="fixed"&&r.display!="none"&&r.visibility!="hidden"){q.push(s)}}return q}function o(p,q){h(k.body).forEach(function(r){var s=r.style[q];r.style[q]=(parseInt((q in r)?r[q]:s)||0)+p+"px";if(!(q in r)){r[q]=s}})}function m(){h(k.body).forEach(function(p){["marginTop","marginBottom","marginLeft","marginRight"].forEach(function(q){if(q in p){p.style[q]=p[q];delete (p[q])}})})}var n;function d(){return n||c.container.querySelector("infobar[extensionid="+f.extension.getExtensionID()+"]")||c.container.appendChild(n=k.createElement("infobar"))&&n}const b=(function(){var p;return{get container(){return p||c.container.querySelector("infobars")||c.container.appendChild(p=k.createElement("infobars"))&&p},set onBottom(q){return this.container[q?"setAttribute":"removeAttribute"]("data-chrome-position-bottom","true")},get onBottom(){return this.container.hasAttribute("data-chrome-position-bottom")}}})();const a=(function(){var p;var t=f.extension.getURL("").split("/")[2];var q=0;var s=false;var r=0;return{get content(){var u=this.container.querySelector("iframe");if(!u){u=k.createElement("iframe");u.style.height="0px";u.setAttribute("id",["infobar",t,r++].join("-"));q=0;this.container.appendChild(u)}return u},get container(){var v=this;if(!p&&!(p=b.container.querySelector("infobar[extensionid='"+t+"']"))){k.documentElement.setAttribute("data-chrome-infobars","true");p=k.createElement("infobar");p.classList.add("initial");p.setAttribute("extensionid",t);var u=k.createElement("close");u.addEventListener("click",function(w){w.target.removeEventListener(w.type,arguments.callee,false);v.hide()},false);p.appendChild(u);j.addEventListener("message",function(y){try{var x=JSON.parse(y.data);if((!x.url||(x.url==v.content.src))&&(!x.frameId||x.frameId==v.content.id)){switch(x.command){case"close":v.hide();y.target.removeEventListener(y.type,arguments.callee,false);break;case"resize":v.resize(x.data.height);break}}}catch(w){w.message=w.message+":"+y.data;console.error(w,y.data)}},false);b.container.appendChild(p)}return p},resize:function(u){p.style.height=u+"px";p.classList.remove("initial");var v=parseInt(j.getComputedStyle(p,null).getPropertyValue("height"))||0;var w=b.onBottom;k.documentElement.style[w?"marginBottom":"marginTop"]=((parseInt(k.documentElement.style.marginTop)||0)-q+v)+"px";q=v;this.content.style.height="";o(u,w?"marginBottom":"marginTop")},show:function(w,v){if(v){b.onBottom=v}var u=this.content;if(u.getAttribute("src")!=w){u.setAttribute("src",w);if(!s){}}s=true},hide:function(){if(p){p.parentNode.removeChild(p);p=undefined;k.documentElement.style.marginTop=(parseInt(k.documentElement.style.marginTop)||0)-q+"px";m()}s=false}}})();const l=(function(){var p;var s=f.extension.getURL("").split("/")[2];var q=0;var r=false;return{set onRight(t){return this.container[t?"setAttribute":"removeAttribute"]("data-chrome-position-right","true")},get onRight(){return this.container.hasAttribute("data-chrome-position-right")},get handle(){var t=this.container.querySelector("handle");if(!t){t=k.createElement("handle");this.container.appendChild(t)}return t},get content(){var t=this.container.querySelector("iframe");if(!t){t=k.createElement("iframe");t.style.width="0px";t.setAttribute("id",["infobar",s].join("-"));q=0;this.container.appendChild(t)}return t},get container(){var u=this;if(!p&&!(p=c.container.querySelector("sidebar"))){k.documentElement.setAttribute("data-chrome-sidebar","true");p=k.createElement("sidebar");p.classList.add("initial");p.setAttribute("extensionid",s);var t=k.createElement("close");t.addEventListener("click",function(v){v.target.removeEventListener(v.type,arguments.callee,false);u.hide()},false);p.appendChild(t);j.addEventListener("message",function(x){try{var w=JSON.parse(x.data);if((!w.url||(w.url==u.content.src))&&(!w.frameId||w.frameId==u.content.id)){switch(w.command){case"close":u.hide();x.target.removeEventListener(x.type,arguments.callee,false);break;case"resize":u.resize(w.data.width);break}}}catch(v){v.message=v.message+":"+x.data;console.error(v,v.stack,x.data)}},false);c.container.appendChild(p)}return p},resize:function(t){p.style.width=t+"px";p.classList.remove("initial");var v=parseInt(j.getComputedStyle(p,null).getPropertyValue("width"))||0;var u=this.onRight;k.documentElement.style[u?"marginRight":"marginLeft"]=((parseInt(k.documentElement.style[u?"marginRight":"marginLeft"])||0)-q+v)+"px";q=v;this.content.style.width="";o(t,u?"marginRight":"marginLeft")},show:function(v,u){if(u){this.onRight=u}var t=this.content;if(t.getAttribute("src")!=v){t.setAttribute("src",v);if(!r){}}r=true},hide:function(){if(p){var t=this.onRight;p.parentNode.removeChild(p);p=undefined;k.documentElement.style[t?"marginRight":"marginLeft"]=(parseInt(k.documentElement.style[t?"marginRight":"marginLeft"])||0)-q+"px";m()}r=false},set title(t){this.handle.textContent=t||""},get title(){return this.handle.textContent}}})();f.extension.onRequest.addListener(function(r,q,p){if(r&&r.chrome&&r.chrome.target&&r.chrome.target=="infobars"){var s=r.chrome.data;switch(r.chrome.command){case"show":a.show(f.extension.getURL(s.path),!!s.onBottom);p();break}}});f.extension.onRequest.addListener(function(r,q,p){if(r&&r.chrome&&r.chrome.target&&r.chrome.target=="sidebar"){var s=r.chrome.data;switch(r.chrome.command){case"show":l.title=s.title;l.show(f.extension.getURL(s.path),s.position!="left");p();break;case"hide":l.hide();p();break}}})})(window.chrome);